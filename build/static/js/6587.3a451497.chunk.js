(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6587,2347],{24220:(e,a,s)=>{"use strict";s.d(a,{R:()=>i});var t=s(72791),r=s(89704),c=s.n(r);const n={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_ARCHIEVED:"http://api1.chandrakala.co.in/api/Tickets/ArchivedByUser",REACT_APP_API_CHANGE_PASSWORD:"http://api1.chandrakala.co.in/api/Login/ChangePassword",REACT_APP_API_DEPARTMENTS:"http://api1.chandrakala.co.in/api/Departments",REACT_APP_API_FORGOT_PASSWORD:"http://api1.chandrakala.co.in/api/Login/ForgetPassword",REACT_APP_API_LOGIN:"http://api1.chandrakala.co.in/api/Login",REACT_APP_API_MODULE:"http://api1.chandrakala.co.in/api/Module",REACT_APP_API_PERMISSION:"http://api1.chandrakala.co.in/api/Permission",REACT_APP_API_PROJECTTYPE:"http://api1.chandrakala.co.in/api/ProjectType",REACT_APP_API_ROLES:"http://api1.chandrakala.co.in/api/Roles",REACT_APP_API_TICKET:"http://api1.chandrakala.co.in/api/Tickets",REACT_APP_API_TICKETFLOW:"http://api1.chandrakala.co.in/api/TicketFlow",REACT_APP_API_TICKETFLOW_BY_COMMENTS:"http://api1.chandrakala.co.in/api/TicketFlow/CommentsByTicketId",REACT_APP_API_TICKETTYPE:"http://api1.chandrakala.co.in/api/TicketTypes",REACT_APP_API_TICKET_COMPLETED:"http://api1.chandrakala.co.in/api/Tickets/MarkCompleted",REACT_APP_API_UPLOAD:"http://api1.chandrakala.co.in/api/Users/upload",REACT_APP_API_USERS:"http://api1.chandrakala.co.in/api/Users",REACT_APP_API_USER_BY_ID:"http://api1.chandrakala.co.in/api/Users",REACT_APP_BASE_API_URL:"http://api1.chandrakala.co.in/api",REACT_APP_BASE_URL:"http://api1.chandrakala.co.in",REACT_APP_MY_SERVER:"http://test1.chandrakala.co.in"}.REACT_APP_SECRET_KEY||"ghjsfysdg123",l=(0,t.createContext)({encrypt:e=>{console.log("Data to encrypt:",e);const a=c().AES.encrypt(e.toString(),n).toString();return console.log("Encrypted data:",a),a.replace(/\//g,";")},decrypt:e=>{if("string"!==typeof e)return e;e=e.replace(/;/g,"/");return c().AES.decrypt(e,n).toString(c().enc.Utf8)}}),i=()=>(0,t.useContext)(l)},5539:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>d});var t=s(55294),r=s(72791),c=s(24849),n=s(57689),l=s(24220),i=s(80184);const d=()=>{const{encrypt:e}=(0,l.R)(),[a,s]=(0,r.useState)(!1),[d,o]=(0,r.useState)([]),[m,h]=(0,r.useState)([]),[p,f]=(0,r.useState)({firstName:"",lastName:"",email:"",password:"",autoGenPass:!0,mobileNo:"",departmentName:"",role:"",address:"",dateOfBirth:"",profilePicturePath:null}),[x,u]=(0,r.useState)(null);(0,r.useEffect)((()=>{!async function(){try{const e=await t.Z.get("http://api1.chandrakala.co.in/api/Departments");o(e.data)}catch(e){console.error("Error fetching departments:",e)}}()}),[]),(0,r.useEffect)((()=>{!async function(){try{const e=await t.Z.get("http://api1.chandrakala.co.in/api/Roles");h(e.data)}catch(e){console.error("Error fetching Roles:",e)}}()}),[]);const N=(0,n.s0)(),_=e=>{const{name:a,value:s,type:t}=e.target;f((r=>({...r,[a]:"file"===t?e.target.files:s})))};return(0,i.jsxs)("div",{className:" au container mt-2",children:[(0,i.jsx)("div",{className:"text-start mb-12 d-flex justify-content-between"}),x&&(0,i.jsx)("div",{className:"alert ".concat(x.includes("successfully")?"alert-success":"alert-danger"),role:"alert",children:x}),(0,i.jsxs)("form",{onSubmit:function(a){a.preventDefault(),s(!0),console.log(p);const r=(new Date).toISOString().split("T")[0];p.dateOfBirth>r?u("Date of Birth must be smaller than the current date."):t.Z.post("http://api1.chandrakala.co.in/api/Users",p).then((a=>{console.log(a),u("User added successfully!"),s(!1),f({firstName:"",lastName:"",email:"",password:"",autoGenPass:!0,mobileNo:"",departmentName:"",role:"",address:"",dateOfBirth:"",profilePicturePath:null}),N("/Users/AddPermissions/".concat(e(a.data.userId)))})).catch((e=>{console.log(e),e.response&&409===e.response.status?u("Error: Email already in use. Please choose a different email."):u("Error adding User. Please try again."),s(!1)}))},children:[(0,i.jsxs)("div",{className:"row mb-3",children:[(0,i.jsxs)("label",{htmlFor:"firstName",className:"col-sm-1 col-form-label text-start",children:["FirstName",(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsx)("div",{className:"col-sm-3",children:(0,i.jsx)("input",{type:"text",className:"form-control",id:"firstName",name:"firstName",placeholder:"Enter FirstName",required:!0,onChange:_})}),(0,i.jsxs)("label",{htmlFor:"lastName",className:"col-sm-1 col-form-label text-end",children:["LastName",(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsx)("div",{className:"col-sm-3",children:(0,i.jsx)("input",{type:"text",className:"form-control",id:"lastName",name:"lastName",placeholder:"Enter lastName",required:!0,onChange:_})}),(0,i.jsxs)("label",{htmlFor:"mobileNo",className:"col-sm-1 col-form-label text-start",children:["MobileNo",(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsx)("div",{className:"col-sm-3",children:(0,i.jsx)("input",{type:"text",className:"form-control",id:"mobileNo",name:"mobileNo",placeholder:"Enter Mobile No.",required:!0,onChange:_})})]}),(0,i.jsxs)("div",{className:"row mb-3",children:[(0,i.jsxs)("label",{htmlFor:"address",className:"col-sm-1 col-form-label text-end",children:["Address",(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsx)("div",{className:"col-sm-3",children:(0,i.jsx)("input",{type:"address",className:"form-control",id:"address",name:"address",placeholder:"Enter Address",required:!0,onChange:_})}),(0,i.jsxs)("label",{htmlFor:"dateOfBirth",className:"col-sm-1 col-form-label text-end",children:["DOB",(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsx)("div",{className:"col-sm-3",children:(0,i.jsx)("input",{type:"date",className:"form-control",id:"dateOfBirth",name:"dateOfBirth",placeholder:"Enter Date Of Birth",required:!0,onChange:_})}),(0,i.jsxs)("label",{htmlFor:"email",className:"col-sm-1 col-form-label text-end",children:["Email",(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsx)("div",{className:"col-sm-3",children:(0,i.jsx)("input",{type:"text",className:"form-control",id:"email",name:"email",placeholder:"Enter email",required:!0,onChange:_})})]}),(0,i.jsxs)("div",{className:"row mb-3",children:[(0,i.jsxs)("label",{htmlFor:"departmentName",className:"col-sm-1 col-form-label text-start",children:["Department",(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsx)("div",{className:"col-sm-3",children:(0,i.jsxs)("select",{className:"form-select",id:"departmentName",name:"departmentName",required:!0,onChange:_,children:[(0,i.jsx)("option",{value:"",children:"Select department"}),d.map((e=>(0,i.jsx)("option",{value:e.departmentName,children:e.departmentName},e.id)))]})}),(0,i.jsxs)("label",{htmlFor:"role",className:"col-sm-1 col-form-label text-start",children:["Designation",(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsx)("div",{className:"col-sm-3",children:(0,i.jsxs)("select",{className:"form-select",id:"role",name:"role",required:!0,onChange:_,children:[(0,i.jsx)("option",{value:"",children:"Select Role"}),m.map((e=>(0,i.jsx)("option",{value:e.role,children:e.role},e.roleId)))]})})]}),(0,i.jsxs)("div",{className:"row mb-3",children:[(0,i.jsx)("div",{className:"col-sm-3"}),(0,i.jsx)("div",{className:"col-sm-9 text-end",children:(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.Z,{animation:"border",size:"sm"}),"Adding User..."]}):" Add User"})})]})]})]})}},29565:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>u});var t=s(72791),r=s(47022),c=s(30018),n=s(89743),l=s(2677),i=s(54694),d=s(29795),o=s(62591),m=s(43360),h=(s(77632),s(55294)),p=s(57689),f=(s(5539),s(24220)),x=s(80184);const u=()=>{const{userId:e}=(0,p.UO)(),{decrypt:a}=(0,f.R)(),s=a(e),u=parseInt(s,10),[N,_]=(0,t.useState)([]),[P,j]=(0,t.useState)([]),[E,b]=(0,t.useState)({}),A=(0,p.s0)(),[v,C]=(0,t.useState)(""),[y,g]=(0,t.useState)(""),[R,T]=(0,t.useState)(!1);(0,t.useEffect)((()=>{(async()=>{try{const e=await h.Z.get("".concat("http://api1.chandrakala.co.in/api/Users","/").concat(s));b(e.data)}catch(e){console.error("Error fetching user details:",e)}})()}),[s]),(0,t.useEffect)((()=>{(async()=>{try{const e=await h.Z.get("http://api1.chandrakala.co.in/api/Module");j(e.data),_(e.data.map((e=>({module_Id:e.id,can_View:!1,can_Add:!1,can_Update:!1,can_Delete:!1}))))}catch(e){console.error("Error fetching modules:",e)}})()}),[]);const k=(e,a,s)=>{_((t=>t.map((t=>t.module_Id===e?{...t,[a]:s,..."can_View"!==a||s?{}:{can_Add:!1,can_Update:!1,can_Delete:!1},..."can_Delete"===a&&s?{can_View:!0,can_Add:!0,can_Update:!0}:"can_Update"===a&&s?{can_View:!0,can_Add:!0}:"can_Add"===a&&s?{can_View:!0}:{}}:t))))};return(0,x.jsxs)(r.Z,{children:[v&&!R&&(0,x.jsx)(c.Z,{variant:"success",className:"mt-3",children:v}),y&&!R&&(0,x.jsx)(c.Z,{variant:"danger",className:"mt-3",children:y}),(0,x.jsx)(n.Z,{className:"justify-content-center mt-5",children:(0,x.jsx)(l.Z,{md:8,children:(0,x.jsxs)(i.Z,{children:[(0,x.jsxs)(i.Z.Header,{as:"h5",className:"text-center",children:["Module Permissions of ",E.firstName]}),(0,x.jsx)(i.Z.Body,{children:(0,x.jsx)(d.Z,{children:(0,x.jsxs)(o.Z,{bordered:!0,children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"Module Name"}),(0,x.jsx)("th",{children:"Can View"}),(0,x.jsx)("th",{children:"Can Add"}),(0,x.jsx)("th",{children:"Can Update"}),(0,x.jsx)("th",{children:"Can Delete"})]})}),(0,x.jsx)("tbody",{children:P.map((e=>(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:e.name}),(0,x.jsx)("td",{children:(0,x.jsx)(d.Z.Check,{type:"switch",id:"".concat(e.name,"-canview-switch"),label:"",onChange:a=>k(e.id,"can_View",a.target.checked),checked:N.some((a=>a.module_Id===e.id&&a.can_View))})}),(0,x.jsx)("td",{children:(0,x.jsx)(d.Z.Check,{type:"switch",id:"".concat(e.name,"-canadd-switch"),label:"",onChange:a=>k(e.id,"can_Add",a.target.checked),checked:N.some((a=>a.module_Id===e.id&&a.can_Add))})}),(0,x.jsx)("td",{children:(0,x.jsx)(d.Z.Check,{type:"switch",id:"".concat(e.name,"-canupdate-switch"),label:"",onChange:a=>k(e.id,"can_Update",a.target.checked),checked:N.some((a=>a.module_Id===e.id&&a.can_Update))})}),(0,x.jsx)("td",{children:(0,x.jsx)(d.Z.Check,{type:"switch",id:"".concat(e.name,"-candelete-switch"),label:"",onChange:a=>k(e.id,"can_Delete",a.target.checked),checked:N.some((a=>a.module_Id===e.id&&a.can_Delete))})})]},e.id)))})]})})}),(0,x.jsx)(i.Z.Footer,{className:"text-center",children:(0,x.jsx)(m.Z,{variant:"primary",onClick:()=>{T(!0),g("");const e=N.map((e=>{let{module_Id:a,can_View:s,can_Add:t,can_Update:r,can_Delete:c}=e;return{userID:u,id:a,canAddOnly:t,canDeleteOnly:c,canUpdateOnly:r,canViewOnly:s}}));h.Z.post("http://api1.chandrakala.co.in/api/Permission",e).then((e=>{console.log("Permissions added successfully:",e.data),C("Permissions added successfully"),A("/permissions/".concat(s))})).catch((e=>{console.error("Error adding permissions:",e),g("Error Adding Permissions. Try again later.")})).finally((()=>{T(!1)}))},children:"Add Permission"})})]})})})]})}},30018:(e,a,s)=>{"use strict";s.d(a,{Z:()=>j});var t=s(81694),r=s.n(t),c=s(72791),n=s(80239),l=s(39007),i=s(10162),d=s(27472),o=s(80184);const m=(0,d.Z)("h4");m.displayName="DivStyledAsH4";const h=c.forwardRef(((e,a)=>{let{className:s,bsPrefix:t,as:c=m,...n}=e;return t=(0,i.vE)(t,"alert-heading"),(0,o.jsx)(c,{ref:a,className:r()(s,t),...n})}));h.displayName="AlertHeading";const p=h;var f=s(16445);const x=c.forwardRef(((e,a)=>{let{className:s,bsPrefix:t,as:c=f.Z,...n}=e;return t=(0,i.vE)(t,"alert-link"),(0,o.jsx)(c,{ref:a,className:r()(s,t),...n})}));x.displayName="AlertLink";const u=x;var N=s(72709),_=s(80473);const P=c.forwardRef(((e,a)=>{const{bsPrefix:s,show:t=!0,closeLabel:c="Close alert",closeVariant:d,className:m,children:h,variant:p="primary",onClose:f,dismissible:x,transition:u=N.Z,...P}=(0,n.Ch)(e,{show:"onClose"}),j=(0,i.vE)(s,"alert"),E=(0,l.Z)((e=>{f&&f(!1,e)})),b=!0===u?N.Z:u,A=(0,o.jsxs)("div",{role:"alert",...b?void 0:P,ref:a,className:r()(m,j,p&&"".concat(j,"-").concat(p),x&&"".concat(j,"-dismissible")),children:[x&&(0,o.jsx)(_.Z,{onClick:E,"aria-label":c,variant:d}),h]});return b?(0,o.jsx)(b,{unmountOnExit:!0,...P,ref:void 0,in:t,children:A}):t?A:null}));P.displayName="Alert";const j=Object.assign(P,{Link:u,Heading:p})},43360:(e,a,s)=>{"use strict";s.d(a,{Z:()=>o});var t=s(81694),r=s.n(t),c=s(72791),n=s(15341),l=s(10162),i=s(80184);const d=c.forwardRef(((e,a)=>{let{as:s,bsPrefix:t,variant:c="primary",size:d,active:o=!1,disabled:m=!1,className:h,...p}=e;const f=(0,l.vE)(t,"btn"),[x,{tagName:u}]=(0,n.FT)({tagName:s,disabled:m,...p}),N=u;return(0,i.jsx)(N,{...x,...p,ref:a,disabled:m,className:r()(h,f,o&&"active",c&&"".concat(f,"-").concat(c),d&&"".concat(f,"-").concat(d),p.href&&m&&"disabled")})}));d.displayName="Button";const o=d},54694:(e,a,s)=>{"use strict";s.d(a,{Z:()=>k});var t=s(81694),r=s.n(t),c=s(72791),n=s(10162),l=s(99033),i=s(80184);const d=c.forwardRef(((e,a)=>{let{className:s,bsPrefix:t,as:c="div",...l}=e;return t=(0,n.vE)(t,"card-footer"),(0,i.jsx)(c,{ref:a,className:r()(s,t),...l})}));d.displayName="CardFooter";const o=d;var m=s(96040);const h=c.forwardRef(((e,a)=>{let{bsPrefix:s,className:t,as:l="div",...d}=e;const o=(0,n.vE)(s,"card-header"),h=(0,c.useMemo)((()=>({cardHeaderBsPrefix:o})),[o]);return(0,i.jsx)(m.Z.Provider,{value:h,children:(0,i.jsx)(l,{ref:a,...d,className:r()(t,o)})})}));h.displayName="CardHeader";const p=h,f=c.forwardRef(((e,a)=>{let{bsPrefix:s,className:t,variant:c,as:l="img",...d}=e;const o=(0,n.vE)(s,"card-img");return(0,i.jsx)(l,{ref:a,className:r()(c?"".concat(o,"-").concat(c):o,t),...d})}));f.displayName="CardImg";const x=f,u=c.forwardRef(((e,a)=>{let{className:s,bsPrefix:t,as:c="div",...l}=e;return t=(0,n.vE)(t,"card-img-overlay"),(0,i.jsx)(c,{ref:a,className:r()(s,t),...l})}));u.displayName="CardImgOverlay";const N=u,_=c.forwardRef(((e,a)=>{let{className:s,bsPrefix:t,as:c="a",...l}=e;return t=(0,n.vE)(t,"card-link"),(0,i.jsx)(c,{ref:a,className:r()(s,t),...l})}));_.displayName="CardLink";const P=_;var j=s(27472);const E=(0,j.Z)("h6"),b=c.forwardRef(((e,a)=>{let{className:s,bsPrefix:t,as:c=E,...l}=e;return t=(0,n.vE)(t,"card-subtitle"),(0,i.jsx)(c,{ref:a,className:r()(s,t),...l})}));b.displayName="CardSubtitle";const A=b,v=c.forwardRef(((e,a)=>{let{className:s,bsPrefix:t,as:c="p",...l}=e;return t=(0,n.vE)(t,"card-text"),(0,i.jsx)(c,{ref:a,className:r()(s,t),...l})}));v.displayName="CardText";const C=v,y=(0,j.Z)("h5"),g=c.forwardRef(((e,a)=>{let{className:s,bsPrefix:t,as:c=y,...l}=e;return t=(0,n.vE)(t,"card-title"),(0,i.jsx)(c,{ref:a,className:r()(s,t),...l})}));g.displayName="CardTitle";const R=g,T=c.forwardRef(((e,a)=>{let{bsPrefix:s,className:t,bg:c,text:d,border:o,body:m=!1,children:h,as:p="div",...f}=e;const x=(0,n.vE)(s,"card");return(0,i.jsx)(p,{ref:a,...f,className:r()(t,x,c&&"bg-".concat(c),d&&"text-".concat(d),o&&"border-".concat(o)),children:m?(0,i.jsx)(l.Z,{children:h}):h})}));T.displayName="Card";const k=Object.assign(T,{Img:x,Title:R,Subtitle:A,Body:l.Z,Link:P,Text:C,Header:p,Footer:o,ImgOverlay:N})},99033:(e,a,s)=>{"use strict";s.d(a,{Z:()=>d});var t=s(72791),r=s(81694),c=s.n(r),n=s(10162),l=s(80184);const i=t.forwardRef(((e,a)=>{let{className:s,bsPrefix:t,as:r="div",...i}=e;return t=(0,n.vE)(t,"card-body"),(0,l.jsx)(r,{ref:a,className:c()(s,t),...i})}));i.displayName="CardBody";const d=i},96040:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});const t=s(72791).createContext(null);t.displayName="CardHeaderContext";const r=t},80473:(e,a,s)=>{"use strict";s.d(a,{Z:()=>m});var t=s(52007),r=s.n(t),c=s(72791),n=s(81694),l=s.n(n),i=s(80184);const d={"aria-label":r().string,onClick:r().func,variant:r().oneOf(["white"])},o=c.forwardRef(((e,a)=>{let{className:s,variant:t,"aria-label":r="Close",...c}=e;return(0,i.jsx)("button",{ref:a,type:"button",className:l()("btn-close",t&&"btn-close-".concat(t),s),"aria-label":r,...c})}));o.displayName="CloseButton",o.propTypes=d;const m=o},47022:(e,a,s)=>{"use strict";s.d(a,{Z:()=>d});var t=s(81694),r=s.n(t),c=s(72791),n=s(10162),l=s(80184);const i=c.forwardRef(((e,a)=>{let{bsPrefix:s,fluid:t=!1,as:c="div",className:i,...d}=e;const o=(0,n.vE)(s,"container"),m="string"===typeof t?"-".concat(t):"-fluid";return(0,l.jsx)(c,{ref:a,...d,className:r()(i,t?"".concat(o).concat(m):o)})}));i.displayName="Container";const d=i},62591:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var t=s(81694),r=s.n(t),c=s(72791),n=s(10162),l=s(80184);const i=c.forwardRef(((e,a)=>{let{bsPrefix:s,className:t,striped:c,bordered:i,borderless:d,hover:o,size:m,variant:h,responsive:p,...f}=e;const x=(0,n.vE)(s,"table"),u=r()(t,x,h&&"".concat(x,"-").concat(h),m&&"".concat(x,"-").concat(m),c&&"".concat(x,"-").concat("string"===typeof c?"striped-".concat(c):"striped"),i&&"".concat(x,"-bordered"),d&&"".concat(x,"-borderless"),o&&"".concat(x,"-hover")),N=(0,l.jsx)("table",{...f,className:u,ref:a});if(p){let e="".concat(x,"-responsive");return"string"===typeof p&&(e="".concat(e,"-").concat(p)),(0,l.jsx)("div",{className:e,children:N})}return N}))},27472:(e,a,s)=>{"use strict";s.d(a,{Z:()=>l});var t=s(72791),r=s(81694),c=s.n(r),n=s(80184);const l=e=>t.forwardRef(((a,s)=>(0,n.jsx)("div",{...a,ref:s,className:c()(a.className,e)})))},77632:()=>{},42480:()=>{}}]);
//# sourceMappingURL=6587.3a451497.chunk.js.map