(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2347],{24220:(e,a,t)=>{"use strict";t.d(a,{R:()=>c});var s=t(72791),r=t(89704),n=t.n(r);const i={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_ARCHIEVED:"http://api1.chandrakala.co.in/api/Tickets/ArchivedByUser",REACT_APP_API_CHANGE_PASSWORD:"http://api1.chandrakala.co.in/api/Login/ChangePassword",REACT_APP_API_DEPARTMENTS:"http://api1.chandrakala.co.in/api/Departments",REACT_APP_API_DESIGNATION:"http://api1.chandrakala.co.in/api/Designation",REACT_APP_API_Filter:"http://api1.chandrakala.co.in/api/Tickets/filter",REACT_APP_API_FORGOT_PASSWORD:"http://api1.chandrakala.co.in/api/Login/ForgetPassword",REACT_APP_API_LOGIN:"http://api1.chandrakala.co.in/api/Login",REACT_APP_API_MODULE:"http://api1.chandrakala.co.in/api/Modules",REACT_APP_API_PERMISSION:"http://api1.chandrakala.co.in/api/Permission",REACT_APP_API_PROJECTTYPE:"http://api1.chandrakala.co.in/api/ProjectType",REACT_APP_API_SavedSearch:"http://api1.chandrakala.co.in/api/SearchSave",REACT_APP_API_TICKET:"http://api1.chandrakala.co.in/api/Tickets",REACT_APP_API_TICKETFLOW:"http://api1.chandrakala.co.in/api/TicketFlow",REACT_APP_API_TICKETFLOW_BY_COMMENTS:"http://api1.chandrakala.co.in/api/TicketFlow/CommentsByTicketId",REACT_APP_API_TICKETTYPE:"http://api1.chandrakala.co.in/api/TicketTypes",REACT_APP_API_TICKET_COMPLETED:"http://api1.chandrakala.co.in/api/Tickets/MarkCompleted",REACT_APP_API_UPLOAD:"http://api1.chandrakala.co.in/api/Users/upload",REACT_APP_API_USERS:"http://api1.chandrakala.co.in/api/Users",REACT_APP_API_USER_BY_ID:"http://api1.chandrakala.co.in/api/Users",REACT_APP_BASE_API_URL:"http://api1.chandrakala.co.in/api",REACT_APP_BASE_URL:"http://api1.chandrakala.co.in",REACT_APP_MY_SERVER:"http://ticket.chandrakala.co.in"}.REACT_APP_SECRET_KEY||"ghjsfysdg123",l=(0,s.createContext)({encrypt:e=>n().AES.encrypt(e.toString(),i).toString().replace(/\//g,";"),decrypt:e=>{if("string"!==typeof e)return e;e=e.replace(/;/g,"/");return n().AES.decrypt(e,i).toString(n().enc.Utf8)}}),c=()=>(0,s.useContext)(l)},5539:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d});var s=t(55294),r=t(72791),n=t(24849),i=t(57689),l=t(24220),c=t(583),o=t(80184);const d=()=>{const{encrypt:e}=(0,l.R)(),[a,t]=(0,r.useState)(!1),[d,m]=(0,r.useState)([]),{user:h}=(0,c.a)(),[p,_]=(0,r.useState)([]),[P,u]=(0,r.useState)([]),[A,x]=(0,r.useState)({firstName:"",lastName:"",email:"",password:"",autoGenPass:!0,mobileNo:"",departmentId:"",roleId:"",designationId:"",address:"",dateOfBirth:"",profilePicturePath:null}),[N,E]=(0,r.useState)(null),[f,g]=(0,r.useState)("");(0,r.useEffect)((()=>{!async function(){try{const e=await s.Z.get("http://api1.chandrakala.co.in/api/Departments",{headers:{Authorization:"Bearer ".concat(null===h||void 0===h?void 0:h.token)}});m(e.data)}catch(e){console.error("Error fetching departments:",e)}}()}),[]),(0,r.useEffect)((()=>{const e=(new Date).toISOString().split("T")[0];g(e)}),[]),(0,r.useEffect)((()=>{!async function(){try{const e=await s.Z.get("".concat("http://api1.chandrakala.co.in/api","/Roles"),{headers:{Authorization:"Bearer ".concat(null===h||void 0===h?void 0:h.token)}});_(e.data)}catch(e){console.error("Error fetching Roles:",e)}}()}),[]),(0,r.useEffect)((()=>{!async function(){try{const e=await s.Z.get("http://api1.chandrakala.co.in/api/Designation",{headers:{Authorization:"Bearer ".concat(null===h||void 0===h?void 0:h.token)}});u(e.data)}catch(e){console.error("Error fetching Designation:",e)}}()}),[]);const T=(0,i.s0)(),j=e=>{const{name:a,value:t,type:s}=e.target;x((r=>({...r,[a]:"file"===s?e.target.files:t})))};return(0,o.jsxs)("div",{className:" au container mt-2",children:[(0,o.jsx)("div",{className:"text-start mb-12 d-flex justify-content-between"}),N&&(0,o.jsx)("div",{className:"alert ".concat(N.includes("successfully")?"alert-success":"alert-danger"),role:"alert",children:N}),(0,o.jsxs)("form",{onSubmit:function(a){return a.preventDefault(),t(!0),10!==A.mobileNo.length?(E("Mobile number must be exactly 10 digits long."),void t(!1)):(r=A.email,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)?void s.Z.post("http://api1.chandrakala.co.in/api/Users",A,{headers:{Authorization:"Bearer ".concat(null===h||void 0===h?void 0:h.token)}}).then((a=>{E("User added successfully!"),t(!1),x({firstName:"",lastName:"",email:"",password:"",autoGenPass:!0,mobileNo:"",departmentId:"",roleId:"",designationId:"",address:"",dateOfBirth:"",profilePicturePath:null}),T("/Users/AddPermissions/".concat(e(a.data.userId)))})).catch((e=>{console.log(e),e.response&&409===e.response.status?E("Error: Email already in use. Please choose a different email."):E("Error adding User. Please try again."),t(!1)})):(E("Email address is in an incorrect format."),void t(!1)));var r},children:[(0,o.jsxs)("div",{className:"row mb-3",children:[(0,o.jsxs)("label",{htmlFor:"firstName",className:"col-sm-1 col-form-label text-start",children:["First Name",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)("div",{className:"col-sm-3",children:(0,o.jsx)("input",{type:"text",className:"form-control",id:"firstName",name:"firstName",placeholder:"Enter First Name",required:!0,onChange:j})}),(0,o.jsxs)("label",{htmlFor:"lastName",className:"col-sm-1 col-form-label text-end",children:["Last Name",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)("div",{className:"col-sm-3",children:(0,o.jsx)("input",{type:"text",className:"form-control",id:"lastName",name:"lastName",placeholder:"Enter Last Name",required:!0,onChange:j})}),(0,o.jsxs)("label",{htmlFor:"mobileNo",className:"col-sm-1 col-form-label text-start",children:["MobileNo",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)("div",{className:"col-sm-3",children:(0,o.jsx)("input",{type:"text",className:"form-control",id:"mobileNo",name:"mobileNo",placeholder:"Enter Mobile No.",required:!0,onChange:j,onKeyPress:e=>{/[0-9]/.test(e.key)||e.preventDefault()},maxLength:"10"})})]}),(0,o.jsxs)("div",{className:"row mb-3",children:[(0,o.jsxs)("label",{htmlFor:"address",className:"col-sm-1 col-form-label text-end",children:["Address",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)("div",{className:"col-sm-3",children:(0,o.jsx)("input",{type:"address",className:"form-control",id:"address",name:"address",placeholder:"Enter Address",required:!0,onChange:j})}),(0,o.jsxs)("label",{htmlFor:"dateOfBirth",className:"col-sm-1 col-form-label text-end",children:["DOB",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)("div",{className:"col-sm-3",children:(0,o.jsx)("input",{type:"date",className:"form-control",id:"dateOfBirth",name:"dateOfBirth",placeholder:"Enter Date Of Birth",required:!0,max:f,onChange:j})}),(0,o.jsxs)("label",{htmlFor:"email",className:"col-sm-1 col-form-label text-end",children:["Email",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)("div",{className:"col-sm-3",children:(0,o.jsx)("input",{type:"text",className:"form-control",id:"email",name:"email",placeholder:"Enter email",required:!0,onChange:j})})]}),(0,o.jsxs)("div",{className:"row mb-3",children:[(0,o.jsxs)("label",{htmlFor:"departmentId",className:"col-sm-1 col-form-label text-start",children:["Department",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)("div",{className:"col-sm-3",children:(0,o.jsxs)("select",{className:"form-select",id:"departmentId",name:"departmentId",required:!0,onChange:j,children:[(0,o.jsx)("option",{value:"",children:"Select department"}),d.map((e=>(0,o.jsx)("option",{value:e.departmentId,children:e.departmentName},e.departmentId)))]})}),(0,o.jsxs)("label",{htmlFor:"roleId",className:"col-sm-1 col-form-label text-end",children:["Role",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)("div",{className:"col-sm-3",children:(0,o.jsxs)("select",{className:"form-select",id:"roleId",name:"roleId",required:!0,onChange:j,children:[(0,o.jsx)("option",{value:"",children:"Select Role"}),p.map((e=>(0,o.jsx)("option",{value:e.roleId,children:e.role},e.roleId)))]})}),(0,o.jsxs)("label",{htmlFor:"designationId",className:"col-sm-1 col-form-label text-end",children:["Designation",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)("div",{className:"col-sm-3",children:(0,o.jsxs)("select",{className:"form-select",id:"designationId",name:"designationId",required:!0,onChange:j,children:[(0,o.jsx)("option",{value:"",children:"Select Designation"}),P.map((e=>(0,o.jsx)("option",{value:e.designationId,children:e.designationName},e.designationId)))]})})]}),(0,o.jsxs)("div",{className:"row mb-3",children:[(0,o.jsx)("div",{className:"col-sm-3"}),(0,o.jsx)("div",{className:"col-sm-9 text-end",children:(0,o.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.Z,{animation:"border",size:"sm"}),"Adding User..."]}):" Add User"})})]})]})]})}},42480:()=>{}}]);
//# sourceMappingURL=2347.69806aac.chunk.js.map