{"version":3,"file":"static/js/4246.7d7132aa.chunk.js","mappings":"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","sources":["views/Tickets/AddTicket.js"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useUser } from './../../context/UserContext';\r\nimport { Spinner } from 'react-bootstrap';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Select from 'react-select';\r\nimport addNotification from \"react-push-notification\";\r\nimport greentick from './images/greentick.jpg';\r\nimport NotificationService from '../Nots/NotificationService';\r\nimport * as signalR from '@microsoft/signalr'; // Import SignalR\r\n\r\nconst dashboardapi= process.env.REACT_APP_MY_SERVER;\r\nconst userapi = process.env.REACT_APP_API_USERS;\r\nconst TicketTypeapi = process.env.REACT_APP_API_TICKETTYPE;\r\nconst ProjectTypeapi = process.env.REACT_APP_API_PROJECTTYPE;\r\nconst Ticketapi = process.env.REACT_APP_API_TICKET;\r\n\r\nconst AddTicket = () => {\r\n  const navigate = useNavigate();\r\n  const { user } = useUser();\r\n  \r\n  const [loading, setLoading] = useState(false);\r\n  const [ticketType, setTicketType] = useState([]);\r\n  const [projectType, setProjectType] = useState([]);\r\n  const [Assignee, setAssignee] = useState([]);\r\n  const [formData, setFormData] = useState({\r\n    email: user.email,\r\n    priority: 'low',\r\n    title: '',\r\n    department: '',\r\n    ticketType: '',\r\n    status: 'Active',\r\n    projectType: '',\r\n    dueDate: '',\r\n    description: '',\r\n    assigneeEmail: '',\r\n    attachments: null\r\n  });\r\n  const [message, setMessage] = useState(null);\r\n  const [hubConnection, setHubConnection] = useState(null); // State for SignalR connection\r\n\r\n  const ClickToNotify = () => {\r\n   \r\n\r\n    addNotification({\r\n      title: 'Ticket',\r\n      message: 'New ticket has been assigned',\r\n      duration: 11000,\r\n      icon: greentick,\r\n      native:true,\r\n      onClick: () => window.location= `${dashboardapi}`,\r\n\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    // Initialize SignalR connection\r\n    const connection = new signalR.HubConnectionBuilder()\r\n      .withUrl('https://localhost:7217/notificationHub/')\r\n      .build();\r\n\r\n    setHubConnection(connection);\r\n\r\n    connection\r\n      .start()\r\n      .then(() => console.log('SignalR Connected'))\r\n      .catch((error) => console.error('SignalR Connection Error: ', error));\r\n\r\n    return () => {\r\n      connection.stop();\r\n    };\r\n  }, []);\r\n\r\n\r\n  useEffect(() => {\r\n    async function fetchAssignee() {\r\n      try {\r\n        const response = await axios.get(userapi);\r\n        setAssignee(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching Assignee:', error);\r\n      }\r\n    }\r\n\r\n    fetchAssignee();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    async function fetchTickettype() {\r\n      try {\r\n        const response = await axios.get(TicketTypeapi);\r\n        setTicketType(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching Ticket Type:', error);\r\n      }\r\n    }\r\n\r\n    fetchTickettype();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    async function fetchProjecttype() {\r\n      try {\r\n        const response = await axios.get(ProjectTypeapi);\r\n        setProjectType(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching Project Type:', error);\r\n      }\r\n    }\r\n\r\n    fetchProjecttype();\r\n  }, []);\r\n\r\n // Modify handleInputChange function\r\nconst handleInputChange = (e) => {\r\n  const { name, value } = e.target || e;\r\n\r\n\r\n  if (name === 'assigneeEmail') {\r\n    const selectedAssignee = Assignee.find(assignee => assignee.email === value);\r\n   \r\n\r\n    const isSelfAssign = value.toLowerCase() === user.email.toLowerCase();\r\n   \r\n\r\n    const newDepartment = isSelfAssign ? selectedAssignee.departmentName : (selectedAssignee?.departmentName || '');\r\n   \r\n\r\n    setFormData((prevData) => ({\r\n      ...prevData,\r\n      [name]: value,\r\n      department: newDepartment,\r\n      status: isSelfAssign ? 'Self-Assigned' : 'Active',\r\n    }));\r\n  } else {\r\n    setFormData((prevData) => ({\r\n      ...prevData,\r\n      [name]: value,\r\n    }));\r\n  }\r\n};\r\n\r\n// ...\r\n\r\n// Modify useEffect function for handling assignee changes\r\nuseEffect(() => {\r\n  const selectedAssignee = Assignee.find((assignee) => assignee.email === formData.assigneeEmail);\r\n  const isSelfAssign = formData.assigneeEmail.toLowerCase() === user.email.toLowerCase();\r\n  const newDepartment = isSelfAssign ? selectedAssignee.departmentName : (selectedAssignee?.departmentName || '');\r\n\r\n  setFormData((prevData) => ({\r\n    ...prevData,\r\n    department: newDepartment,\r\n    status: isSelfAssign ? 'Self-Assigned' : 'Active',\r\n  }));\r\n}, [formData.assigneeEmail, Assignee, user]);\r\n\r\n// ...\r\n\r\n\r\n  const handleFileChange = (e) => {\r\n    setFormData(prevData => ({\r\n      ...prevData,\r\n      attachments: e.target.files\r\n    }));\r\n  };\r\n\r\n  const handleTicketSubmit = async (event) => {\r\n    event.preventDefault();\r\n    setLoading(true);\r\n\r\n    const formattedParams = Object.entries(formData)\r\n      .map(([key, value]) => `${encodeURIComponent(key)}=${encodeURIComponent(value)}`)\r\n      .join('&');\r\n\r\n    const formDataToSend = new FormData();\r\n    Object.entries(formData).forEach(([key, value]) => {\r\n      if (key === 'attachments') {\r\n        if (value) {\r\n          for (let i = 0; i < value.length; i++) {\r\n            formDataToSend.append('attachments', value[i]);\r\n          }\r\n        }\r\n      } else {\r\n        formDataToSend.append(key, value);\r\n      }\r\n    });\r\n\r\n    try {\r\n      const res = await axios.post(`${Ticketapi}?${formattedParams}`, formDataToSend, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      });\r\n\r\n      console.log(res);\r\n      setMessage('Ticket added successfully!');\r\n      setLoading(false);\r\n\r\n       // Send notification using SignalR after successful ticket addition\r\n       if (hubConnection) {\r\n        hubConnection.invoke('SendTicketAssignmentNotification', formData.assigneeEmail, `New ticket added: ${formData.title}`);\r\n      }\r\n       ClickToNotify();\r\n\r\n\r\n      setFormData({\r\n        email: user.email,\r\n        priority: 'low',\r\n        title: '',\r\n        department: '',\r\n        ticketType: '',\r\n        status: 'Active',\r\n        projectType: '',\r\n        dueDate: '',\r\n        description: '',\r\n        assigneeEmail: '',\r\n        attachments: null\r\n      });\r\n      navigate(`/Tickets/AddTicket/${res.data.userId}`);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessage('Error adding ticket. Please try again.');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <div className='d-flex justify-content-between'></div>\r\n\r\n      {message && (\r\n        <div className={`alert ${message.includes('successfully') ? 'alert-success' : 'alert-danger'}`} role=\"alert\">\r\n          {message}\r\n        </div>\r\n      )}\r\n\r\n      <form onSubmit={handleTicketSubmit}>\r\n        {/* ticketId */}\r\n        <div className=\"row mb-3\">\r\n          <label htmlFor=\"ticketId\" className=\"col-sm-3 col-form-label text-end\">\r\n            Ticket ID:\r\n          </label>\r\n          <div className=\"col-sm-3\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"ticketId\"\r\n              name=\"ticketId\"\r\n              placeholder=\"Ticket ID\"\r\n              required\r\n              onChange={handleInputChange}\r\n              disabled\r\n              value='0'\r\n            />\r\n          </div>\r\n\r\n          {/* priority */}\r\n          <label htmlFor=\"priority\" className=\"col-sm-3 col-form-label text-end\">\r\n            Priority<span className=\"text-danger\"> * </span>\r\n          </label>\r\n          <div className=\"col-sm-3\">\r\n            <select\r\n              className=\"form-select\"\r\n              id=\"priority\"\r\n              name=\"priority\"\r\n              placeholder=\"Select priority\"\r\n              required\r\n              onChange={handleInputChange}\r\n            >\r\n              <option defaultValue>Select Priority</option>\r\n              <option value=\"low\">Low</option>\r\n              <option value=\"medium\">Medium</option>\r\n              <option value=\"high\">High</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        {/* title */}\r\n        <div className=\"row mb-3\">\r\n          <label htmlFor=\"title\" className=\"col-sm-3 col-form-label text-end\">\r\n            Title<span className=\"text-danger\"> * </span>\r\n          </label>\r\n          <div className=\"col-sm-3\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"title\"\r\n              name=\"title\"\r\n              placeholder=\"Enter title\"\r\n              required\r\n              onChange={handleInputChange}\r\n            />\r\n          </div>\r\n          {/* department */}\r\n          <label htmlFor=\"department\" className=\"col-sm-3 col-form-label text-end\">\r\n            Department<span className=\"text-danger\"> * </span>\r\n          </label>\r\n          <div className=\"col-sm-3\">\r\n            <input\r\n              className=\"form-control\"\r\n              id=\"department\"\r\n              name=\"department\"\r\n              value={formData.department || ''}\r\n              required\r\n              onChange={handleInputChange}\r\n              readOnly\r\n              disabled\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Ticket Type */}\r\n        <div className=\"row mb-3\">\r\n          <label htmlFor=\"ticketType\" className=\"col-sm-3 col-form-label text-end\">\r\n            Ticket Type<span className=\"text-danger\"> * </span>\r\n          </label>\r\n          <div className=\"col-sm-3\">\r\n            <Select\r\n              options={ticketType.map((TT) => ({\r\n                label: TT.ticketType,\r\n                value: TT.ticketType,\r\n              }))}\r\n              value={{\r\n                label: formData.ticketType,\r\n                value: formData.ticketType,\r\n              }}\r\n              onChange={(selectedOption) =>\r\n                handleInputChange({\r\n                  target: { name: 'ticketType', value: selectedOption.value },\r\n                })\r\n              }\r\n              isSearchable\r\n              placeholder=\"Select Ticket Type\"\r\n            />\r\n          </div>\r\n          {/* status */}\r\n          <label htmlFor=\"status\" className=\"col-sm-3 col-form-label text-end\">\r\n            Status<span className=\"text-danger\"> * </span>\r\n          </label>\r\n          <div className=\"col-sm-3\">\r\n            <input\r\n              className=\"form-control\"\r\n              id=\"status\"\r\n              name=\"status\"\r\n              value={formData.status}\r\n              required\r\n              onChange={handleInputChange}\r\n              readOnly\r\n              disabled\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Creator ID */}\r\n        <div className=\"row mb-3\">\r\n          <label htmlFor=\"email\" className=\"col-sm-3 col-form-label text-end\">\r\n            Creator<span className=\"text-danger\"> * </span>\r\n          </label>\r\n          <div className=\"col-sm-3\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"email\"\r\n              name=\"email\"\r\n              placeholder=\"Enter your Email\"\r\n              required\r\n              value={user.email}\r\n              onChange={handleInputChange}\r\n              disabled\r\n            />\r\n          </div>\r\n\r\n          {/* Assigned To */}\r\n          <label htmlFor=\"assigneeEmail\" className=\"col-sm-3 col-form-label text-end\">\r\n            Assignee Email<span className=\"text-danger\"> * </span>\r\n          </label>\r\n          <div className=\"col-sm-3\">\r\n            <Select\r\n              options={Assignee.map((Setas) => ({\r\n                label: Setas.email,\r\n                value: Setas.email,\r\n              }))}\r\n              value={{\r\n                label: formData.assigneeEmail,\r\n                value: formData.assigneeEmail,\r\n              }}\r\n              onChange={(selectedOption) =>\r\n                handleInputChange({\r\n                  target: { name: 'assigneeEmail', value: selectedOption.value },\r\n                })\r\n              }\r\n              isSearchable\r\n              placeholder=\"Select Assignee\"\r\n            />\r\n          </div>\r\n        </div>\r\n        {/* Project Type */}\r\n        <div className=\"row mb-3\">\r\n          <label htmlFor=\"projectType\" className=\"col-sm-3 col-form-label text-end\">\r\n            Project Type<span className=\"text-danger\"> * </span>\r\n          </label>\r\n          <div className=\"col-sm-3\">\r\n            <Select\r\n              options={projectType.map((pt) => ({\r\n                label: pt.projectTypes,\r\n                value: pt.projectTypes,\r\n              }))}\r\n              value={{\r\n                label: formData.projectType,\r\n                value: formData.projectType,\r\n              }}\r\n              onChange={(selectedOption) =>\r\n                handleInputChange({\r\n                  target: { name: 'projectType', value: selectedOption.value },\r\n                })\r\n              }\r\n              isSearchable\r\n              placeholder=\"Select Project Type\"\r\n            />\r\n          </div>\r\n          {/* Due Date */}\r\n          <label htmlFor=\"dueDate\" className=\"col-sm-3 col-form-label text-end\">\r\n            Due Date<span className=\"text-danger\"> * </span>\r\n          </label>\r\n          <div className=\"col-sm-3\">\r\n            <input\r\n              type=\"date\"\r\n              className=\"form-control\"\r\n              id=\"dueDate\"\r\n              name=\"dueDate\"\r\n              placeholder=\"Select Due Date\"\r\n              required\r\n              onChange={handleInputChange}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* description */}\r\n        <div className=\"row mb-3\">\r\n          <label htmlFor=\"description\" className=\"col-sm-3 col-form-label text-end\">\r\n            Description<span className=\"text-danger\"> * </span>\r\n          </label>\r\n          <div className=\"col-sm-9\">\r\n            <textarea\r\n              className=\"form-control\"\r\n              id=\"description\"\r\n              name=\"description\"\r\n              placeholder=\"Enter description\"\r\n              rows=\"4\"\r\n              required\r\n              onChange={handleInputChange}\r\n            ></textarea>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"row mb-3\">\r\n          <label htmlFor=\"attachments\" className=\"col-sm-3 col-form-label text-end\">\r\n            Attachments:\r\n          </label>\r\n          <div className=\"col-sm-9\">\r\n            <input\r\n              type=\"file\"\r\n              className=\"form-control\"\r\n              id=\"attachments\"\r\n              name=\"attachments\"\r\n              multiple\r\n              onChange={handleFileChange}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"row mb-3\">\r\n          <div className=\"col-sm-3\"></div>\r\n          <div className=\"col-sm-9 text-end\">\r\n            <button type=\"submit\" className=\"btn btn-primary\" disabled={loading} >\r\n              {loading ? <><Spinner animation=\"border\" size='sm' /> Adding Ticket...</> : \"Add Ticket\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n      \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddTicket;\r\n"],"names":["AddTicket","navigate","useNavigate","user","useUser","loading","setLoading","useState","ticketType","setTicketType","projectType","setProjectType","Assignee","setAssignee","formData","setFormData","email","priority","title","department","status","dueDate","description","assigneeEmail","attachments","message","setMessage","hubConnection","setHubConnection","useEffect","connection","signalR","withUrl","build","start","then","console","log","catch","error","stop","async","response","axios","get","process","data","fetchAssignee","fetchTickettype","fetchProjecttype","handleInputChange","e","name","value","target","selectedAssignee","find","assignee","isSelfAssign","toLowerCase","newDepartment","departmentName","prevData","_jsxs","className","children","_jsx","concat","includes","role","onSubmit","event","preventDefault","formattedParams","Object","entries","map","_ref","key","encodeURIComponent","join","formDataToSend","FormData","forEach","_ref2","i","length","append","res","post","headers","invoke","addNotification","duration","icon","greentick","native","onClick","window","location","userId","err","htmlFor","type","id","placeholder","required","onChange","disabled","defaultValue","readOnly","Select","options","TT","label","selectedOption","isSearchable","Setas","pt","projectTypes","rows","multiple","files","_Fragment","Spinner","animation","size"],"sourceRoot":""}