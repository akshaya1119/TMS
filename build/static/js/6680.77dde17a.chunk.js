"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6680],{33358:(e,s,n)=>{n.d(s,{Z:()=>x});var r=n(72791),a=n(93647),t=n(47022),o=n(29795),c=n(30018),i=n(27098),l=n(89743),d=n(2677),u=n(43360),h=n(55294),m=n(24846),p=n(583),w=(n(3327),n(80184));const x=()=>{const{logout:e,user:s}=(0,p.a)(),[n,x]=(0,r.useState)({currentPassword:"",newPassword:""}),[f,y]=(0,r.useState)({}),[v,P]=(0,r.useState)({currentPassword:!1,newPassword:!1}),[g,E]=(0,r.useState)(!1),[j,C]=(0,r.useState)({success:"",error:""}),N=async()=>{if((()=>{const{currentPassword:e,newPassword:s}=n,r={};return["currentPassword","newPassword"].forEach((e=>{n[e]||(r[e]="".concat(e.charAt(0).toUpperCase()+e.slice(1)," is required"))})),s.length<8&&(r.newPassword="New Password must be at least 8 characters long"),e===s&&(r.newPassword="New Password cannot be the same as the Current Password"),y(r),0===Object.keys(r).length})()){E(!0);try{const r=await h.Z.put("".concat("http://api1.chandrakala.co.in/api/Login/ChangePassword","/").concat(s.userId),{currentPassword:n.currentPassword,newPassword:n.newPassword},{headers:{Authorization:"Bearer ".concat(null===s||void 0===s?void 0:s.token)}});200===r.status?(C({success:"Your password has been changed. Please login again.",error:""}),setTimeout((()=>{e()}),3e3)):400===r.status?C({success:"",error:"Enter Correct Old Password!"}):C({success:"",error:"Password change failed. Please try again."})}catch(r){C({success:"",error:"Enter Correct Old Password!"})}finally{E(!1)}}};return(0,w.jsx)(t.Z,{children:(0,w.jsxs)(o.Z,{onSubmit:e=>{e.preventDefault(),N()},children:[(0,w.jsx)("h1",{children:"Password Reset"}),(0,w.jsx)("p",{children:"Change your password"}),j.success&&(0,w.jsx)(c.Z,{variant:"success",children:j.success}),j.error&&(0,w.jsx)(c.Z,{variant:"danger",children:j.error}),["currentPassword","newPassword"].map((e=>(0,w.jsx)("div",{className:"mb-4",children:(0,w.jsxs)(i.Z,{hasValidation:!0,children:[(0,w.jsx)(i.Z.Text,{children:(0,w.jsx)(m.Z,{icon:a.U})}),(0,w.jsx)(o.Z.Control,{type:v[e]?"text":"password",placeholder:"currentPassword"===e?"Current Password":"New Password",autoComplete:"currentPassword"===e?"old-password":"new-password",value:n[e],onChange:s=>((e,s)=>{if(x((n=>({...n,[e]:s}))),y((n=>({...n,[e]:s.trim()?"":"".concat(e.charAt(0).toUpperCase()+e.slice(1)," is required")}))),"newPassword"===e){const e=/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/;y((n=>({...n,newPassword:s.length<8?"New Password must be at least 8 characters long":e.test(s)?"":"Password must contain at least one letter, one number, and one special character"})))}"currentPassword"===e&&C({success:"",error:""})})(e,s.target.value),isInvalid:!!f[e]}),(0,w.jsx)(i.Z.Text,{onClick:()=>(e=>{P((s=>({...s,[e]:!s[e]})))})(e),className:"hovericon",children:v[e]?(0,w.jsx)("i",{className:"fa-solid fa-eye"}):(0,w.jsx)("i",{className:"fa-solid fa-eye-slash"})}),(0,w.jsx)(o.Z.Control.Feedback,{type:"invalid",children:f[e]})]})},e))),(0,w.jsxs)(l.Z,{children:[(0,w.jsx)(d.Z,{xs:6,className:"align-items-start",children:(0,w.jsx)(u.Z,{type:"submit",variant:"primary",className:"px-4 ",style:{backgroundColor:"#FF725E"},disabled:g,children:g?"Changing Password...":"Change Password"})}),(0,w.jsx)(d.Z,{xs:6,className:"text-end fs-5"})]})]})})}},26680:(e,s,n)=>{n.r(s),n.d(s,{default:()=>K});var r=n(72791),a=n(81694),t=n.n(a),o=n(80239),c=n(10162),i=n(17858);function l(e,s){return Array.isArray(e)?e.includes(s):e===s}const d=r.createContext({});d.displayName="AccordionContext";const u=d;var h=n(80184);const m=r.forwardRef(((e,s)=>{let{as:n="div",bsPrefix:a,className:o,children:d,eventKey:m,...p}=e;const{activeEventKey:w}=(0,r.useContext)(u);return a=(0,c.vE)(a,"accordion-collapse"),(0,h.jsx)(i.Z,{ref:s,in:l(w,m),...p,className:t()(o,a),children:(0,h.jsx)(n,{children:r.Children.only(d)})})}));m.displayName="AccordionCollapse";const p=m,w=r.createContext({eventKey:""});w.displayName="AccordionItemContext";const x=w,f=r.forwardRef(((e,s)=>{let{as:n="div",bsPrefix:a,className:o,onEnter:i,onEntering:l,onEntered:d,onExit:u,onExiting:m,onExited:w,...f}=e;a=(0,c.vE)(a,"accordion-body");const{eventKey:y}=(0,r.useContext)(x);return(0,h.jsx)(p,{eventKey:y,onEnter:i,onEntering:l,onEntered:d,onExit:u,onExiting:m,onExited:w,children:(0,h.jsx)(n,{ref:s,...f,className:t()(o,a)})})}));f.displayName="AccordionBody";const y=f;const v=r.forwardRef(((e,s)=>{let{as:n="button",bsPrefix:a,className:o,onClick:i,...d}=e;a=(0,c.vE)(a,"accordion-button");const{eventKey:m}=(0,r.useContext)(x),p=function(e,s){const{activeEventKey:n,onSelect:a,alwaysOpen:t}=(0,r.useContext)(u);return r=>{let o=e===n?null:e;t&&(o=Array.isArray(n)?n.includes(e)?n.filter((s=>s!==e)):[...n,e]:[e]),null==a||a(o,r),null==s||s(r)}}(m,i),{activeEventKey:w}=(0,r.useContext)(u);return"button"===n&&(d.type="button"),(0,h.jsx)(n,{ref:s,onClick:p,...d,"aria-expanded":Array.isArray(w)?w.includes(m):m===w,className:t()(o,a,!l(w,m)&&"collapsed")})}));v.displayName="AccordionButton";const P=v,g=r.forwardRef(((e,s)=>{let{as:n="h2",bsPrefix:r,className:a,children:o,onClick:i,...l}=e;return r=(0,c.vE)(r,"accordion-header"),(0,h.jsx)(n,{ref:s,...l,className:t()(a,r),children:(0,h.jsx)(P,{onClick:i,children:o})})}));g.displayName="AccordionHeader";const E=g,j=r.forwardRef(((e,s)=>{let{as:n="div",bsPrefix:a,className:o,eventKey:i,...l}=e;a=(0,c.vE)(a,"accordion-item");const d=(0,r.useMemo)((()=>({eventKey:i})),[i]);return(0,h.jsx)(x.Provider,{value:d,children:(0,h.jsx)(n,{ref:s,...l,className:t()(o,a)})})}));j.displayName="AccordionItem";const C=j,N=r.forwardRef(((e,s)=>{const{as:n="div",activeKey:a,bsPrefix:i,className:l,onSelect:d,flush:m,alwaysOpen:p,...w}=(0,o.Ch)(e,{activeKey:"onSelect"}),x=(0,c.vE)(i,"accordion"),f=(0,r.useMemo)((()=>({activeEventKey:a,onSelect:d,alwaysOpen:p})),[a,d,p]);return(0,h.jsx)(u.Provider,{value:f,children:(0,h.jsx)(n,{ref:s,...w,className:t()(l,x,m&&"".concat(x,"-flush"))})})}));N.displayName="Accordion";const Z=Object.assign(N,{Button:P,Collapse:p,Item:C,Header:E,Body:y});var b=n(9806),A=n(11632),k=n(33358);const K=function(){return(0,h.jsx)(Z,{children:(0,h.jsxs)(Z.Item,{eventKey:"0",children:[(0,h.jsxs)(Z.Header,{children:[(0,h.jsx)(b.G,{icon:A.byT,className:"me-2"})," Change Password"]}),(0,h.jsx)(Z.Body,{children:(0,h.jsx)(k.Z,{})})]})})}},93647:(e,s,n)=>{n.d(s,{U:()=>r});var r=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M384,200V144a128,128,0,0,0-256,0v56H88V328c0,92.635,75.364,168,168,168s168-75.365,168-168V200ZM160,144a96,96,0,0,1,192,0v56H160ZM392,328c0,74.99-61.01,136-136,136s-136-61.01-136-136V232H392Z' class='ci-primary'/>"]},17858:(e,s,n)=>{n.d(s,{Z:()=>x});var r=n(81694),a=n.n(r),t=n(75427),o=n(72791),c=n(65090),i=n(71380);const l=function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return s.filter((e=>null!=e)).reduce(((e,s)=>{if("function"!==typeof s)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?s:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),s.apply(this,r)}}),null)};var d=n(67202),u=n(85007),h=n(80184);const m={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function p(e,s){const n=s["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],r=m[e];return n+parseInt((0,t.Z)(s,r[0]),10)+parseInt((0,t.Z)(s,r[1]),10)}const w={[c.Wj]:"collapse",[c.Ix]:"collapsing",[c.d0]:"collapsing",[c.cn]:"collapse show"},x=o.forwardRef(((e,s)=>{let{onEnter:n,onEntering:r,onEntered:t,onExit:c,onExiting:m,className:x,children:f,dimension:y="height",in:v=!1,timeout:P=300,mountOnEnter:g=!1,unmountOnExit:E=!1,appear:j=!1,getDimensionValue:C=p,...N}=e;const Z="function"===typeof y?y():y,b=(0,o.useMemo)((()=>l((e=>{e.style[Z]="0"}),n)),[Z,n]),A=(0,o.useMemo)((()=>l((e=>{const s="scroll".concat(Z[0].toUpperCase()).concat(Z.slice(1));e.style[Z]="".concat(e[s],"px")}),r)),[Z,r]),k=(0,o.useMemo)((()=>l((e=>{e.style[Z]=null}),t)),[Z,t]),K=(0,o.useMemo)((()=>l((e=>{e.style[Z]="".concat(C(Z,e),"px"),(0,d.Z)(e)}),c)),[c,C,Z]),_=(0,o.useMemo)((()=>l((e=>{e.style[Z]=null}),m)),[Z,m]);return(0,h.jsx)(u.Z,{ref:s,addEndListener:i.Z,...N,"aria-expanded":N.role?v:null,onEnter:b,onEntering:A,onEntered:k,onExit:K,onExiting:_,childRef:f.ref,in:v,timeout:P,mountOnEnter:g,unmountOnExit:E,appear:j,children:(e,s)=>o.cloneElement(f,{...s,className:a()(x,f.props.className,w[e],"width"===Z&&"collapse-horizontal")})})}))},3327:()=>{}}]);
//# sourceMappingURL=6680.77dde17a.chunk.js.map