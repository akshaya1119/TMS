"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[3517],{33517:(e,s,l)=>{l.r(s),l.d(s,{default:()=>u});var t=l(72791),a=l(42443),n=l(583),c=l(55294),r=l(88890),i=l.n(r),d=l(11087),o=l(80184);const m="http://api1.chandrakala.co.in/api/Users",h="http://api1.chandrakala.co.in/api/Tickets",u=()=>{(0,t.useRef)(null);const e=(0,t.useRef)(null),s=(0,t.useRef)(null),[l,r]=(0,t.useState)({}),{user:u}=(0,n.a)(),[x,j]=(0,t.useState)(!1),[p,f]=(0,t.useState)(null),[N,b]=(0,t.useState)(!1),[g,v]=(0,t.useState)(null),[P,w]=(0,t.useState)(null);(0,t.useEffect)((()=>{u.userId&&fetch("".concat(m,"/").concat(u.userId)).then((e=>e.json())).then((e=>{console.log("Fetched user details:",e),r(e)})).catch((e=>{console.error("Error fetching user details:",e)}))}),[u.userId]),(0,t.useEffect)((()=>{null!==l&&void 0!==l&&l.email&&(k(),T())}),[null===l||void 0===l?void 0:l.email]),(0,t.useEffect)((()=>{null!==g&&y(e,g)}),[g]),(0,t.useEffect)((()=>{null!==P&&y(s,P)}),[P]);const y=(e,s)=>{let l=0;const t=s/50,a=setInterval((()=>{l+=t,l>=s&&(l=s,clearInterval(a)),i()(e.current).find(".counter-value").text(Math.ceil(l))}),40)},k=async()=>{try{const e=await fetch("".concat(h,"/status-count?email=").concat(l.email));if(!e.ok)throw new Error("Error fetching assigned tickets count: ".concat(e.status));const s=await e.json(),t=s.activeCount+s.pendingCount+s.selfassignedCount+s.completedCount;v(t),console.log("Assigned Tickets Count:",t)}catch(e){console.error("Error fetching assigned tickets count:",e)}},T=async()=>{try{const e=await fetch("".concat(h,"/status/completed"));if(!e.ok)throw new Error("Error fetching resolved tickets count: ".concat(e.status));const s=await e.json();w(s.length),console.log("Resolved Tickets Count:",s.length)}catch(e){console.error("Error fetching resolved tickets count:",e)}};return(0,o.jsx)("section",{style:{backgroundColor:"#f8f9fa",padding:"20px"},children:(0,o.jsxs)(a.L5,{className:"py-5",children:[(0,o.jsx)(a.uZ,{children:(0,o.jsx)(a.TK,{children:(0,o.jsxs)(a.ME,{className:"bg-light rounded-3 p-3 mb-4",children:[(0,o.jsx)(a.zp,{children:(0,o.jsx)(d.rU,{to:"/dashboard",children:"Home"})}),(0,o.jsx)(a.zp,{children:(0,o.jsx)(d.rU,{to:"/Users/AllUsers",children:"User"})}),(0,o.jsx)(a.zp,{active:!0,children:"User Profile"})]})})}),(0,o.jsxs)(a.uZ,{children:[(0,o.jsxs)(a.TK,{lg:"4",children:[(0,o.jsxs)(a.Yl,{className:"mb-4",children:[(0,o.jsx)("div",{children:(0,o.jsxs)(a.H7,{className:"text-center d-flex flex-column align-items-center position-relative",children:[(0,o.jsx)("div",{className:"rounded-circle overflow-hidden position-relative  border border-2 border-primary",style:{width:"150px",height:"150px",overflow:"hidden"},children:(0,o.jsx)(a.PH,{src:null!==l&&void 0!==l&&l.profilePicturePath?"".concat("http://api1.chandrakala.co.in","/").concat(l.profilePicturePath,"?timestamp=").concat(Date.now()):"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3.webp",alt:"avatar",className:"w-100 h-100",fluid:!0})}),(0,o.jsx)("label",{htmlFor:"fileInput",className:"position-absolute bottom-0 end-0 m-2",children:(0,o.jsx)(a.vm,{icon:"pen",className:"text-dark"})}),(0,o.jsx)("input",{type:"file",id:"fileInput",className:"d-none",onChange:e=>{const s=e.target.files[0];f(s),j(!0);const l=URL.createObjectURL(s);document.getElementById("previewImage").src=l}})]})}),x&&(0,o.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>{if(p){b(!0);const e=new FormData;e.append("image",p),c.Z.post("".concat(m,"/upload/").concat(u.userId),e).then((e=>{r((s=>({...s,profilePicturePath:e.data.filePath}))),j(!1)})).catch((e=>{console.error("Error updating profile picture:",e)})).finally((()=>{b(!1),j(!1),k(),T()}))}},disabled:N,children:N?"Loading...":"Submit"})]}),(0,o.jsx)(a.Yl,{className:"mb-4 mb-lg-0",children:(0,o.jsx)(a.H7,{className:"p-0",children:(0,o.jsxs)(a.d8,{flush:"true",classNa:!0,me:"rounded-3",children:[(0,o.jsxs)(a.FQ,{className:"d-flex justify-content-between align-items-center p-3 fs-5",ref:e,style:{backgroundColor:"#d32f2f"},children:[(0,o.jsx)(a.Pp,{className:"counter-value fw-bold fs-3",children:g}),(0,o.jsx)(a.Pp,{children:"Total Tickets Assigned"})]}),(0,o.jsxs)(a.FQ,{className:"d-flex justify-content-between align-items-center p-3 fs-5",ref:s,style:{backgroundColor:"#2e7d32"},children:[(0,o.jsx)(a.Pp,{className:"counter-value fw-bold fs-3",children:P}),(0,o.jsx)(a.Pp,{children:"Tickets Resolve"})]})]})})})]}),(0,o.jsxs)(a.TK,{lg:"8",children:[console.log("userDetails:",l),console.log("firstName:",null===l||void 0===l?void 0:l.profilePicturePath),l?(0,o.jsx)(a.Yl,{className:"mb-4",children:(0,o.jsxs)(a.H7,{children:[(0,o.jsxs)(a.uZ,{children:[(0,o.jsx)(a.TK,{sm:"3",children:(0,o.jsx)(a.Pp,{children:"Full Name"})}),(0,o.jsx)(a.TK,{sm:"9",children:(0,o.jsx)(a.Pp,{className:"text-muted",children:"".concat(l.firstName," ").concat(l.lastName)||"N/A"})})]}),(0,o.jsx)("hr",{}),(0,o.jsxs)(a.uZ,{children:[(0,o.jsx)(a.TK,{sm:"3",children:(0,o.jsx)(a.Pp,{children:"Email"})}),(0,o.jsx)(a.TK,{sm:"9",children:(0,o.jsx)(a.Pp,{className:"text-muted",children:l.email||"N/A"})})]}),(0,o.jsx)("hr",{}),(0,o.jsxs)(a.uZ,{children:[(0,o.jsx)(a.TK,{sm:"3",children:(0,o.jsx)(a.Pp,{children:"Designation"})}),(0,o.jsx)(a.TK,{sm:"9",children:(0,o.jsx)(a.Pp,{className:"text-muted",children:l.role||"N/A"})})]}),(0,o.jsx)("hr",{}),(0,o.jsxs)(a.uZ,{children:[(0,o.jsx)(a.TK,{sm:"3",children:(0,o.jsx)(a.Pp,{children:"Department"})}),(0,o.jsx)(a.TK,{sm:"9",children:(0,o.jsx)(a.Pp,{className:"text-muted",children:l.departmentName||"N/A"})})]}),(0,o.jsx)("hr",{}),(0,o.jsxs)(a.uZ,{children:[(0,o.jsx)(a.TK,{sm:"3",children:(0,o.jsx)(a.Pp,{children:"Mobile"})}),(0,o.jsx)(a.TK,{sm:"9",children:(0,o.jsx)(a.Pp,{className:"text-muted",children:l.mobileNo||"N/A"})})]}),(0,o.jsx)("hr",{}),(0,o.jsxs)(a.uZ,{children:[(0,o.jsx)(a.TK,{sm:"3",children:(0,o.jsx)(a.Pp,{children:"Address"})}),(0,o.jsx)(a.TK,{sm:"9",children:(0,o.jsx)(a.Pp,{className:"text-muted",children:l.address||"N/A"})})]})]})}):(0,o.jsx)("p",{children:"Loading..."}),(0,o.jsxs)(a.uZ,{children:[(0,o.jsx)(a.TK,{md:"6",children:(0,o.jsx)(a.Yl,{className:"mb-4 mb-md-0",children:(0,o.jsxs)(a.H7,{children:[(0,o.jsxs)(a.Pp,{className:"mb-4",children:[(0,o.jsx)("span",{className:"text-primary font-italic me-1",children:"assigment"})," Project Status"]}),(0,o.jsx)(a.Pp,{className:"mb-1",style:{fontSize:".77rem"},children:"Web Design"}),(0,o.jsx)(a.g9,{className:"rounded",children:(0,o.jsx)(a.F5,{width:80,valuemin:0,valuemax:100})}),(0,o.jsx)(a.Pp,{className:"mt-4 mb-1",style:{fontSize:".77rem"},children:"Website Markup"}),(0,o.jsx)(a.g9,{className:"rounded",children:(0,o.jsx)(a.F5,{width:72,valuemin:0,valuemax:100})}),(0,o.jsx)(a.Pp,{className:"mt-4 mb-1",style:{fontSize:".77rem"},children:"One Page"}),(0,o.jsx)(a.g9,{className:"rounded",children:(0,o.jsx)(a.F5,{width:89,valuemin:0,valuemax:100})}),(0,o.jsx)(a.Pp,{className:"mt-4 mb-1",style:{fontSize:".77rem"},children:"Mobile Template"}),(0,o.jsx)(a.g9,{className:"rounded",children:(0,o.jsx)(a.F5,{width:55,valuemin:0,valuemax:100})}),(0,o.jsx)(a.Pp,{className:"mt-4 mb-1",style:{fontSize:".77rem"},children:"Backend API"}),(0,o.jsx)(a.g9,{className:"rounded",children:(0,o.jsx)(a.F5,{width:66,valuemin:0,valuemax:100})})]})})}),(0,o.jsx)(a.TK,{md:"6",children:(0,o.jsx)(a.Yl,{className:"mb-4 mb-md-0",children:(0,o.jsxs)(a.H7,{children:[(0,o.jsxs)(a.Pp,{className:"mb-4",children:[(0,o.jsx)("span",{className:"text-primary font-italic me-1",children:"assigment"})," Project Status"]}),(0,o.jsx)(a.Pp,{className:"mb-1",style:{fontSize:".77rem"},children:"Web Design"}),(0,o.jsx)(a.g9,{className:"rounded",children:(0,o.jsx)(a.F5,{width:80,valuemin:0,valuemax:100})}),(0,o.jsx)(a.Pp,{className:"mt-4 mb-1",style:{fontSize:".77rem"},children:"Website Markup"}),(0,o.jsx)(a.g9,{className:"rounded",children:(0,o.jsx)(a.F5,{width:72,valuemin:0,valuemax:100})}),(0,o.jsx)(a.Pp,{className:"mt-4 mb-1",style:{fontSize:".77rem"},children:"One Page"}),(0,o.jsx)(a.g9,{className:"rounded",children:(0,o.jsx)(a.F5,{width:89,valuemin:0,valuemax:100})}),(0,o.jsx)(a.Pp,{className:"mt-4 mb-1",style:{fontSize:".77rem"},children:"Mobile Template"}),(0,o.jsx)(a.g9,{className:"rounded",children:(0,o.jsx)(a.F5,{width:55,valuemin:0,valuemax:100})}),(0,o.jsx)(a.Pp,{className:"mt-4 mb-1",style:{fontSize:".77rem"},children:"Backend API"}),(0,o.jsx)(a.g9,{className:"rounded",children:(0,o.jsx)(a.F5,{width:66,valuemin:0,valuemax:100})})]})})})]})]})]})]})})}}}]);
//# sourceMappingURL=3517.e988dec4.chunk.js.map