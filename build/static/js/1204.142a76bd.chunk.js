"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[1204],{61204:(e,t,c)=>{c.r(t),c.d(t,{default:()=>p});var r=c(72791),s=c(30018),n=c(62591),a=c(43360),i=c(17612),l=c(55294),d=c(9806),o=c(11632),h=c(583),x=c(80184);const j="http://api1.chandrakala.co.in",p=()=>{const[e,t]=(0,r.useState)([]),[c,p]=(0,r.useState)(!1),[u,m]=(0,r.useState)(null),[v,f]=(0,r.useState)(!1),[k,Z]=(0,r.useState)(!0),[y,b]=(0,r.useState)(null),[g,w]=(0,r.useState)(!1),[N,C]=(0,r.useState)(!1),{user:_}=(0,h.a)();(0,r.useEffect)((()=>{(async()=>{try{const e=await l.Z.get("".concat("http://api1.chandrakala.co.in/api/Tickets/ArchivedByUser","?userId=").concat(_.userId));t(e.data),Z(!1)}catch(y){console.error("Error fetching archived tickets:",y),Z(!1)}})()}),[_.userId]);const I=()=>{m(null),f(!1)};return(0,x.jsxs)("div",{className:"mt-6 table-responsive",children:[y&&(0,x.jsx)(s.Z,{variant:"danger",children:y}),k?(0,x.jsx)("div",{children:"Loading..."}):(0,x.jsxs)(n.Z,{striped:!0,bordered:!0,hover:!0,children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"S.No"}),(0,x.jsx)("th",{children:"TicketID"}),(0,x.jsx)("th",{children:"Title"}),(0,x.jsx)("th",{children:"Status"}),(0,x.jsx)("th",{children:"Priority"}),(0,x.jsx)("th",{children:"TicketType"}),(0,x.jsx)("th",{children:"DueDate"}),(0,x.jsx)("th",{children:"Department"}),(0,x.jsx)("th",{children:"ProjectType"}),(0,x.jsx)("th",{children:"Action"})]})}),(0,x.jsx)("tbody",{children:e.map(((e,t)=>(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:t+1}),(0,x.jsx)("td",{children:e.ticketId}),(0,x.jsx)("td",{children:e.title}),(0,x.jsx)("td",{children:e.status}),(0,x.jsx)("td",{children:e.priority}),(0,x.jsx)("td",{children:e.ticketType}),(0,x.jsx)("td",{children:new Date(e.dueDate).toLocaleString()}),(0,x.jsx)("td",{children:e.department}),(0,x.jsx)("td",{children:e.project2}),(0,x.jsxs)("td",{children:[(0,x.jsx)(a.Z,{onClick:()=>(e=>{m(e),p(!0)})(e),children:(0,x.jsx)(d.G,{icon:o.Mdf,className:"text-success"})}),(0,x.jsx)(a.Z,{onClick:()=>(e=>{m(e),f(!0)})(e),children:(0,x.jsx)(d.G,{icon:o.jHE,className:"text-danger"})})]})]},e.ticketId)))})]}),(0,x.jsxs)(i.Z,{show:v,onHide:I,children:[(0,x.jsx)(i.Z.Header,{closeButton:!0,children:(0,x.jsx)(i.Z.Title,{children:"Confirm Unarchive"})}),(0,x.jsxs)(i.Z.Body,{children:["Are you sure you want to unarchive ticket ",u?u.ticketId:"","?"]}),(0,x.jsxs)(i.Z.Footer,{children:[(0,x.jsx)(a.Z,{variant:"secondary",onClick:I,children:"Cancel"}),(0,x.jsx)(a.Z,{variant:"danger",onClick:async()=>{try{await l.Z.post("".concat("http://api1.chandrakala.co.in/api/Tickets","/").concat(u.ticketId,"/unarchive?userId=").concat(_.userId)),window.location.reload()}catch(y){console.error("Error unarchiving ticket:",y)}finally{I()}},children:"Unarchive"})]})]}),u&&(0,x.jsxs)(i.Z,{show:c,onHide:()=>p(!1),size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,x.jsx)(i.Z.Header,{closeButton:!0,children:(0,x.jsx)(i.Z.Title,{id:"contained-modal-title-vcenter",children:"Ticket Details"})}),(0,x.jsxs)(i.Z.Body,{children:[(0,x.jsxs)("p",{children:["Title: ",u.title]}),(0,x.jsxs)("p",{children:["Description: ",u.description]}),(0,x.jsxs)("p",{children:["Creator ID: ",u.email]}),(0,x.jsxs)("p",{children:["Assignee ID: ",u.assigneeEmail]}),(0,x.jsx)("p",{children:"Attachments:"}),u.attachment&&(0,x.jsx)("div",{children:N&&/\.(png|jpg|jpeg|gif|bmp)$/i.test(u.attachment)?(0,x.jsx)("img",{src:"".concat(j,"/").concat(u.attachment.replace("wwwroot/","")),alt:"Attachment",className:"img-fluid"}):(0,x.jsx)("p",{children:(0,x.jsx)("a",{href:"".concat(j,"/").concat(u.attachment.replace("wwwroot/","")),target:"_blank",rel:"noopener noreferrer",children:"View Attachment"})})})]}),(0,x.jsx)(i.Z.Footer,{children:(0,x.jsx)(a.Z,{onClick:()=>p(!1),children:"Close"})})]})]})}},30018:(e,t,c)=>{c.d(t,{Z:()=>Z});var r=c(81694),s=c.n(r),n=c(72791),a=c(80239),i=c(39007),l=c(10162),d=c(27472),o=c(80184);const h=(0,d.Z)("h4");h.displayName="DivStyledAsH4";const x=n.forwardRef(((e,t)=>{let{className:c,bsPrefix:r,as:n=h,...a}=e;return r=(0,l.vE)(r,"alert-heading"),(0,o.jsx)(n,{ref:t,className:s()(c,r),...a})}));x.displayName="AlertHeading";const j=x;var p=c(31396);const u=n.forwardRef(((e,t)=>{let{className:c,bsPrefix:r,as:n=p.Z,...a}=e;return r=(0,l.vE)(r,"alert-link"),(0,o.jsx)(n,{ref:t,className:s()(c,r),...a})}));u.displayName="AlertLink";const m=u;var v=c(72709),f=c(80473);const k=n.forwardRef(((e,t)=>{const{bsPrefix:c,show:r=!0,closeLabel:n="Close alert",closeVariant:d,className:h,children:x,variant:j="primary",onClose:p,dismissible:u,transition:m=v.Z,...k}=(0,a.Ch)(e,{show:"onClose"}),Z=(0,l.vE)(c,"alert"),y=(0,i.Z)((e=>{p&&p(!1,e)})),b=!0===m?v.Z:m,g=(0,o.jsxs)("div",{role:"alert",...b?void 0:k,ref:t,className:s()(h,Z,j&&"".concat(Z,"-").concat(j),u&&"".concat(Z,"-dismissible")),children:[u&&(0,o.jsx)(f.Z,{onClick:y,"aria-label":n,variant:d}),x]});return b?(0,o.jsx)(b,{unmountOnExit:!0,...k,ref:void 0,in:r,children:g}):r?g:null}));k.displayName="Alert";const Z=Object.assign(k,{Link:m,Heading:j})},62591:(e,t,c)=>{c.d(t,{Z:()=>l});var r=c(81694),s=c.n(r),n=c(72791),a=c(10162),i=c(80184);const l=n.forwardRef(((e,t)=>{let{bsPrefix:c,className:r,striped:n,bordered:l,borderless:d,hover:o,size:h,variant:x,responsive:j,...p}=e;const u=(0,a.vE)(c,"table"),m=s()(r,u,x&&"".concat(u,"-").concat(x),h&&"".concat(u,"-").concat(h),n&&"".concat(u,"-").concat("string"===typeof n?"striped-".concat(n):"striped"),l&&"".concat(u,"-bordered"),d&&"".concat(u,"-borderless"),o&&"".concat(u,"-hover")),v=(0,i.jsx)("table",{...p,className:m,ref:t});if(j){let e="".concat(u,"-responsive");return"string"===typeof j&&(e="".concat(e,"-").concat(j)),(0,i.jsx)("div",{className:e,children:v})}return v}))}}]);
//# sourceMappingURL=1204.142a76bd.chunk.js.map