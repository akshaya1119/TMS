(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[1100],{24220:(e,a,t)=>{"use strict";t.d(a,{R:()=>o});var c=t(72791),n=t(89704),r=t.n(n);const s={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_ARCHIEVED:"http://api1.chandrakala.co.in/api/Tickets/ArchivedByUser",REACT_APP_API_CHANGE_PASSWORD:"http://api1.chandrakala.co.in/api/Login/ChangePassword",REACT_APP_API_DEPARTMENTS:"http://api1.chandrakala.co.in/api/Departments",REACT_APP_API_DESIGNATION:"http://api1.chandrakala.co.in/api/Designation",REACT_APP_API_Filter:"http://api1.chandrakala.co.in/api/Tickets/filter",REACT_APP_API_FORGOT_PASSWORD:"http://api1.chandrakala.co.in/api/Login/ForgetPassword",REACT_APP_API_LOGIN:"http://api1.chandrakala.co.in/api/Login",REACT_APP_API_MODULE:"http://api1.chandrakala.co.in/api/Modules",REACT_APP_API_PERMISSION:"http://api1.chandrakala.co.in/api/Permission",REACT_APP_API_PROJECTTYPE:"http://api1.chandrakala.co.in/api/ProjectType",REACT_APP_API_SavedSearch:"http://api1.chandrakala.co.in/api/SearchSave",REACT_APP_API_TICKET:"http://api1.chandrakala.co.in/api/Tickets",REACT_APP_API_TICKETFLOW:"http://api1.chandrakala.co.in/api/TicketFlow",REACT_APP_API_TICKETFLOW_BY_COMMENTS:"http://api1.chandrakala.co.in/api/TicketFlow/CommentsByTicketId",REACT_APP_API_TICKETTYPE:"http://api1.chandrakala.co.in/api/TicketTypes",REACT_APP_API_TICKET_COMPLETED:"http://api1.chandrakala.co.in/api/Tickets/MarkCompleted",REACT_APP_API_UPLOAD:"http://api1.chandrakala.co.in/api/Users/upload",REACT_APP_API_USERS:"http://api1.chandrakala.co.in/api/Users",REACT_APP_API_USER_BY_ID:"http://api1.chandrakala.co.in/api/Users",REACT_APP_BASE_API_URL:"http://api1.chandrakala.co.in/api",REACT_APP_BASE_URL:"http://api1.chandrakala.co.in",REACT_APP_MY_SERVER:"http://ticket.chandrakala.co.in"}.REACT_APP_SECRET_KEY||"ghjsfysdg123",i=(0,c.createContext)({encrypt:e=>r().AES.encrypt(e.toString(),s).toString().replace(/\//g,";"),decrypt:e=>{if("string"!==typeof e)return e;e=e.replace(/;/g,"/");return r().AES.decrypt(e,s).toString(r().enc.Utf8)}}),o=()=>(0,c.useContext)(i)},50017:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>f});var c=t(72791),n=t(583),r=t(88890),s=t.n(r),i=t(57689),o=t(47022),d=t(30018),l=t(89743),h=t(2677),p=t(62591),_=(t(77632),t(55294)),u=t(24220),P=t(80184);const A="http://api1.chandrakala.co.in",E=()=>{const{decrypt:e}=(0,u.R)(),[a,t]=(0,c.useState)([]),[r,s]=(0,c.useState)([]),[i,E]=(0,c.useState)(!1),[T,f]=(0,c.useState)(""),[C,k]=(0,c.useState)(""),{user:v}=(0,n.a)();(0,c.useEffect)((()=>{(async()=>{try{const e=await _.Z.get("".concat(A,"/api/Permission/ByUser/").concat(null===v||void 0===v?void 0:v.userId),{headers:{Authorization:"Bearer ".concat(null===v||void 0===v?void 0:v.token)}});t(e.data)}catch(e){console.error("Error fetching permissions:",e),k("Error fetching permissions. Please try again.")}})(),(async()=>{try{const e=await _.Z.get("".concat(A,"/api/Modules"),{headers:{Authorization:"Bearer ".concat(null===v||void 0===v?void 0:v.token)}});s(e.data)}catch(e){console.error("Error fetching modules:",e),k("Error fetching modules. Please try again.")}})()}),[v]);const x=e=>{const a=r.find((a=>a.id===e));return a?a.name:"Unknown"};return(0,P.jsxs)(o.Z,{children:[T&&!i&&(0,P.jsx)(d.Z,{variant:"success",className:"mt-3",children:T}),C&&!i&&(0,P.jsx)(d.Z,{variant:"danger",className:"mt-3",children:C}),(0,P.jsx)(l.Z,{className:"justify-content-center",children:(0,P.jsx)(h.Z,{md:12,children:(0,P.jsxs)(p.Z,{bordered:!0,children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{children:[(0,P.jsx)("th",{children:"Module Name"}),(0,P.jsx)("th",{children:"Can View"}),(0,P.jsx)("th",{children:"Can Add"}),(0,P.jsx)("th",{children:"Can Update"}),(0,P.jsx)("th",{children:"Can Delete"})]})}),(0,P.jsx)("tbody",{children:a.map((e=>(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:x(e.id)}),(0,P.jsx)("td",{children:e.canViewOnly?"Yes":"No"}),(0,P.jsx)("td",{children:e.canAddOnly?"Yes":"No"}),(0,P.jsx)("td",{children:e.canUpdateOnly?"Yes":"No"}),(0,P.jsx)("td",{children:e.canDeleteOnly?"Yes":"No"})]},e.permission_Id)))})]})})})]})},T="http://api1.chandrakala.co.in/api/Tickets",f=()=>{const{userId:e}=(0,i.UO)(),a=((0,c.useRef)(null),(0,c.useRef)(null)),t=(0,c.useRef)(null),[r,o]=(0,c.useState)({}),{user:d}=(0,n.a)(),l=e||d.userId,[h,p]=(0,c.useState)(null),[_,u]=(0,c.useState)(null);(0,c.useEffect)((()=>{l&&fetch("".concat("http://api1.chandrakala.co.in/api/Users","/").concat(l)).then((e=>e.json())).then((e=>{o(e)})).catch((e=>{console.error("Error fetching user details:",e)}))}),[l]),(0,c.useEffect)((()=>{null!==r&&void 0!==r&&r.email&&(f(),C())}),[null===r||void 0===r?void 0:r.email]),(0,c.useEffect)((()=>{null!==h&&A(a,h)}),[h]),(0,c.useEffect)((()=>{null!==_&&A(t,_)}),[_]);const A=(e,a)=>{let t=0;const c=a/50,n=setInterval((()=>{t+=c,t>=a&&(t=a,clearInterval(n)),s()(e.current).find(".counter-value").text(Math.ceil(t))}),40)},f=async()=>{try{const e=await fetch("".concat(T,"/status-count?id=").concat(r.userId),{headers:{Authorization:"Bearer ".concat(null===d||void 0===d?void 0:d.token)}});if(!e.ok)throw new Error("Error fetching assigned tickets count: ".concat(e.status));const a=await e.json(),t=(null===a||void 0===a?void 0:a.openCount)+a.pendingCount+a.selfassignedCount+a.completedCount;p(t)}catch(e){console.error("Error fetching assigned tickets count:",e)}},C=async()=>{try{const e=await fetch("".concat(T,"/status-count?id=").concat(r.userId),{headers:{Authorization:"Bearer ".concat(null===d||void 0===d?void 0:d.token)}});if(!e.ok)throw new Error("Error fetching resolved tickets count: ".concat(e.status));const a=(await e.json()).completedCount;u(a)}catch(e){console.error("Error fetching resolved tickets count:",e)}};return(0,P.jsxs)("div",{className:"container",children:[(0,P.jsxs)("div",{className:"row",children:[(0,P.jsx)("div",{className:"col",children:(0,P.jsx)("div",{className:"card",children:(0,P.jsxs)("div",{className:"card-details mt-2",children:[(0,P.jsx)("p",{className:"text-title text-center",children:"Tickets Assigned"}),(0,P.jsx)("div",{ref:a,children:(0,P.jsx)("p",{className:"text-body text-center",children:h})})]})})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsx)("div",{className:"card",children:(0,P.jsxs)("div",{className:"card-details mt-2",children:[(0,P.jsx)("p",{className:"text-title text-center",children:"Tickets Resolved"}),(0,P.jsx)("p",{className:"text-body text-center",children:_})]})})})]}),(0,P.jsx)("div",{className:"row mt-4",children:(0,P.jsxs)("div",{className:"",children:[(0,P.jsx)("h3",{children:"Permissions: "}),(0,P.jsx)(E,{userid:l})]})})]})}},47022:(e,a,t)=>{"use strict";t.d(a,{Z:()=>d});var c=t(81694),n=t.n(c),r=t(72791),s=t(10162),i=t(80184);const o=r.forwardRef(((e,a)=>{let{bsPrefix:t,fluid:c=!1,as:r="div",className:o,...d}=e;const l=(0,s.vE)(t,"container"),h="string"===typeof c?"-".concat(c):"-fluid";return(0,i.jsx)(r,{ref:a,...d,className:n()(o,c?"".concat(l).concat(h):l)})}));o.displayName="Container";const d=o},62591:(e,a,t)=>{"use strict";t.d(a,{Z:()=>o});var c=t(81694),n=t.n(c),r=t(72791),s=t(10162),i=t(80184);const o=r.forwardRef(((e,a)=>{let{bsPrefix:t,className:c,striped:r,bordered:o,borderless:d,hover:l,size:h,variant:p,responsive:_,...u}=e;const P=(0,s.vE)(t,"table"),A=n()(c,P,p&&"".concat(P,"-").concat(p),h&&"".concat(P,"-").concat(h),r&&"".concat(P,"-").concat("string"===typeof r?"striped-".concat(r):"striped"),o&&"".concat(P,"-bordered"),d&&"".concat(P,"-borderless"),l&&"".concat(P,"-hover")),E=(0,i.jsx)("table",{...u,className:A,ref:a});if(_){let e="".concat(P,"-responsive");return"string"===typeof _&&(e="".concat(e,"-").concat(_)),(0,i.jsx)("div",{className:e,children:E})}return E}))},77632:()=>{},42480:()=>{}}]);
//# sourceMappingURL=1100.598ea877.chunk.js.map