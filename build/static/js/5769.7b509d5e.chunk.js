(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5769,276],{24220:(e,a,s)=>{"use strict";s.d(a,{R:()=>l});var t=s(72791),n=s(89704),r=s.n(n);const c={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_ARCHIEVED:"http://api1.chandrakala.co.in/api/Tickets/ArchivedByUser",REACT_APP_API_CHANGE_PASSWORD:"http://api1.chandrakala.co.in/api/Login/ChangePassword",REACT_APP_API_DEPARTMENTS:"http://api1.chandrakala.co.in/api/Departments",REACT_APP_API_DESIGNATION:"http://api1.chandrakala.co.in/api/Designation",REACT_APP_API_FORGOT_PASSWORD:"http://api1.chandrakala.co.in/api/Login/ForgetPassword",REACT_APP_API_LOGIN:"http://api1.chandrakala.co.in/api/Login",REACT_APP_API_MODULE:"http://api1.chandrakala.co.in/api/Modules",REACT_APP_API_PERMISSION:"http://api1.chandrakala.co.in/api/Permission",REACT_APP_API_PROJECTTYPE:"http://api1.chandrakala.co.in/api/ProjectType",REACT_APP_API_TICKET:"http://api1.chandrakala.co.in/api/Tickets",REACT_APP_API_TICKETFLOW:"http://api1.chandrakala.co.in/api/TicketFlow",REACT_APP_API_TICKETFLOW_BY_COMMENTS:"http://api1.chandrakala.co.in/api/TicketFlow/CommentsByTicketId",REACT_APP_API_TICKETTYPE:"http://api1.chandrakala.co.in/api/TicketTypes",REACT_APP_API_TICKET_COMPLETED:"http://api1.chandrakala.co.in/api/Tickets/MarkCompleted",REACT_APP_API_UPLOAD:"http://api1.chandrakala.co.in/api/Users/upload",REACT_APP_API_USERS:"http://api1.chandrakala.co.in/api/Users",REACT_APP_API_USER_BY_ID:"http://api1.chandrakala.co.in/api/Users",REACT_APP_BASE_API_URL:"http://api1.chandrakala.co.in/api",REACT_APP_BASE_URL:"http://api1.chandrakala.co.in",REACT_APP_MY_SERVER:"http://test1.chandrakala.co.in"}.REACT_APP_SECRET_KEY||"ghjsfysdg123",i=(0,t.createContext)({encrypt:e=>{console.log("Data to encrypt:",e);const a=r().AES.encrypt(e.toString(),c).toString();return console.log("Encrypted data:",a),a.replace(/\//g,";")},decrypt:e=>{if("string"!==typeof e)return e;e=e.replace(/;/g,"/");return r().AES.decrypt(e,c).toString(r().enc.Utf8)}}),l=()=>(0,t.useContext)(i)},8011:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>m});var t=s(72791),n=s(2515),r=s(55294),c=s(47022),i=s(89743),l=s(2677),d=s(54694),o=s(43360),p=s(42922),h=s(80184);const m=()=>{const[e,a]=(0,t.useState)([]),[s,m]=(0,t.useState)(null),[f,u]=(0,t.useState)(""),[P,y]=(0,t.useState)(!1);(0,t.useEffect)((()=>{(async()=>{try{const e=await r.Z.get("".concat("http://api1.chandrakala.co.in","/api/Users"));a(e.data)}catch(e){console.error("Error fetching users:",e)}})()}),[]);return(0,h.jsx)(c.Z,{className:"py-4",children:(0,h.jsxs)(i.Z,{children:[(0,h.jsx)(l.Z,{md:4,children:(0,h.jsx)(d.Z,{children:(0,h.jsxs)(d.Z.Body,{children:[(0,h.jsx)("h5",{className:"mb-4",children:"Select User to View Permissions"}),(0,h.jsx)(n.ZP,{options:e.map((e=>({value:e.userId,label:"".concat(e.firstName," ").concat(e.lastName),departmentname:e.departmentname}))),filterOption:(e,a)=>{let{label:s}=e;return s.toLowerCase().includes(a.toLowerCase())},placeholder:"Search for a user...",onChange:e=>{m(e),u(e.departmentname),y(!1)},value:s}),s&&(0,h.jsxs)("div",{className:"mt-4 ",children:[(0,h.jsxs)("h6",{children:["Department Name: ",f]}),(0,h.jsx)("div",{className:"text-center",children:(0,h.jsx)(o.Z,{onClick:()=>{y(!0)},children:"View Permission"})})]})]})})}),(0,h.jsx)(l.Z,{md:6,children:P&&s&&(0,h.jsx)(p.default,{userid:null===s||void 0===s?void 0:s.value})})]})})}},42922:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>P});var t=s(72791),n=s(47022),r=s(30018),c=s(89743),i=s(2677),l=s(54694),d=s(29795),o=s(62591),p=(s(77632),s(55294)),h=s(24220),m=s(36704),f=s(80184);const u="http://api1.chandrakala.co.in",P=e=>{let{userid:a}=e;const s=a,{decrypt:P}=(0,h.R)(),[y,_]=(0,t.useState)([]),[x,A]=(0,t.useState)([]),[E,C]=(0,t.useState)(!1),[N,v]=(0,t.useState)(""),[j,T]=(0,t.useState)(""),[g,O]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{try{const e=await p.Z.get("".concat(u,"/api/Permission/ByUser/").concat(s));_(e.data)}catch(e){console.error("Error fetching permissions:",e),T("Error fetching permissions. Please try again.")}})(),(async()=>{try{const e=await p.Z.get("".concat(u,"/api/Modules"));A(e.data)}catch(e){console.error("Error fetching modules:",e),T("Error fetching modules. Please try again.")}})()}),[s]);const b=async(e,a,s)=>{C(!0),T("");try{const t=y.map((t=>t.permission_Id===e?"canViewOnly"!==a||s?{...t,[a]:s,..."canViewOnly"===a&&s?{canAddOnly:!1,canUpdateOnly:!1,canDeleteOnly:!1}:"canAddOnly"===a&&s?{canViewOnly:!0}:"canUpdateOnly"===a&&s?{canViewOnly:!0,canAddOnly:!0}:"canDeleteOnly"===a&&s?{canViewOnly:!0,canAddOnly:!0,canUpdateOnly:!0}:{}}:{...t,canViewOnly:!1,canAddOnly:!1,canUpdateOnly:!1,canDeleteOnly:!1}:t));_(t),O(e);const n=t.find((a=>a.permission_Id===e));if(console.log("Updated Permission:",n),!n)return void T("Updated permission not found. Please try again.");const{permission_Id:r,userID:c,id:i,canAddOnly:l,canDeleteOnly:d,canUpdateOnly:o,canViewOnly:h}=n;await p.Z.put("".concat(u,"/api/Permission/").concat(r),{permission_Id:r,userID:c,id:i,canAddOnly:l,canDeleteOnly:d,canUpdateOnly:o,canViewOnly:h}),v("Permissions updated successfully")}catch(t){console.error("Error updating permissions:",t),T("Error updating permissions. Please try again.")}finally{C(!1)}},R=e=>{const a=x.find((a=>a.id===e));return a?a.name:"Unknown"};return(0,f.jsx)(m.Z,{children:e=>{let{hasPermission:a}=e;return a(7,"canUpdateOnly")&&(0,f.jsxs)(n.Z,{children:[N&&!E&&(0,f.jsx)(r.Z,{variant:"success",className:"mt-3",children:N}),j&&!E&&(0,f.jsx)(r.Z,{variant:"danger",className:"mt-3",children:j}),(0,f.jsx)(c.Z,{className:"justify-content-center",children:(0,f.jsx)(i.Z,{md:12,children:(0,f.jsxs)(l.Z,{children:[(0,f.jsx)(l.Z.Header,{as:"h5",className:"text-center",children:"Update Permissions"}),(0,f.jsx)(l.Z.Body,{children:(0,f.jsx)(d.Z,{className:"table-responsive",children:(0,f.jsxs)(o.Z,{bordered:!0,children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{children:"Module Name"}),(0,f.jsx)("th",{children:"Can View"}),(0,f.jsx)("th",{children:"Can Add"}),(0,f.jsx)("th",{children:"Can Update"}),(0,f.jsx)("th",{children:"Can Delete"})]})}),(0,f.jsx)("tbody",{children:y.length>0&&y.map((e=>(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{children:R(e.id)}),(0,f.jsx)("td",{children:(0,f.jsx)(d.Z.Check,{type:"switch",id:"".concat(R(e.id),"-canview-switch"),label:"",checked:e.canViewOnly,onChange:a=>b(e.permission_Id,"canViewOnly",a.target.checked)})}),(0,f.jsx)("td",{children:(0,f.jsx)(d.Z.Check,{type:"switch",id:"".concat(R(e.id),"-canadd-switch"),label:"",checked:e.canAddOnly,onChange:a=>b(e.permission_Id,"canAddOnly",a.target.checked)})}),(0,f.jsx)("td",{children:(0,f.jsx)(d.Z.Check,{type:"switch",id:"".concat(R(e.id),"-canupdate-switch"),label:"",checked:e.canUpdateOnly,onChange:a=>b(e.permission_Id,"canUpdateOnly",a.target.checked)})}),(0,f.jsx)("td",{children:(0,f.jsx)(d.Z.Check,{type:"switch",id:"".concat(R(e.id),"-candelete-switch"),label:"",checked:e.canDeleteOnly,onChange:a=>b(e.permission_Id,"canDeleteOnly",a.target.checked)})})]},e.permission_Id)))})]})})})]})})})]})}})}},30018:(e,a,s)=>{"use strict";s.d(a,{Z:()=>A});var t=s(81694),n=s.n(t),r=s(72791),c=s(80239),i=s(39007),l=s(10162),d=s(27472),o=s(80184);const p=(0,d.Z)("h4");p.displayName="DivStyledAsH4";const h=r.forwardRef(((e,a)=>{let{className:s,bsPrefix:t,as:r=p,...c}=e;return t=(0,l.vE)(t,"alert-heading"),(0,o.jsx)(r,{ref:a,className:n()(s,t),...c})}));h.displayName="AlertHeading";const m=h;var f=s(31396);const u=r.forwardRef(((e,a)=>{let{className:s,bsPrefix:t,as:r=f.Z,...c}=e;return t=(0,l.vE)(t,"alert-link"),(0,o.jsx)(r,{ref:a,className:n()(s,t),...c})}));u.displayName="AlertLink";const P=u;var y=s(72709),_=s(80473);const x=r.forwardRef(((e,a)=>{const{bsPrefix:s,show:t=!0,closeLabel:r="Close alert",closeVariant:d,className:p,children:h,variant:m="primary",onClose:f,dismissible:u,transition:P=y.Z,...x}=(0,c.Ch)(e,{show:"onClose"}),A=(0,l.vE)(s,"alert"),E=(0,i.Z)((e=>{f&&f(!1,e)})),C=!0===P?y.Z:P,N=(0,o.jsxs)("div",{role:"alert",...C?void 0:x,ref:a,className:n()(p,A,m&&"".concat(A,"-").concat(m),u&&"".concat(A,"-dismissible")),children:[u&&(0,o.jsx)(_.Z,{onClick:E,"aria-label":r,variant:d}),h]});return C?(0,o.jsx)(C,{unmountOnExit:!0,...x,ref:void 0,in:t,children:N}):t?N:null}));x.displayName="Alert";const A=Object.assign(x,{Link:P,Heading:m})},43360:(e,a,s)=>{"use strict";s.d(a,{Z:()=>o});var t=s(81694),n=s.n(t),r=s(72791),c=s(15341),i=s(10162),l=s(80184);const d=r.forwardRef(((e,a)=>{let{as:s,bsPrefix:t,variant:r="primary",size:d,active:o=!1,disabled:p=!1,className:h,...m}=e;const f=(0,i.vE)(t,"btn"),[u,{tagName:P}]=(0,c.FT)({tagName:s,disabled:p,...m}),y=P;return(0,l.jsx)(y,{...u,...m,ref:a,disabled:p,className:n()(h,f,o&&"active",r&&"".concat(f,"-").concat(r),d&&"".concat(f,"-").concat(d),m.href&&p&&"disabled")})}));d.displayName="Button";const o=d},54694:(e,a,s)=>{"use strict";s.d(a,{Z:()=>R});var t=s(81694),n=s.n(t),r=s(72791),c=s(10162),i=s(99033),l=s(80184);const d=r.forwardRef(((e,a)=>{let{className:s,bsPrefix:t,as:r="div",...i}=e;return t=(0,c.vE)(t,"card-footer"),(0,l.jsx)(r,{ref:a,className:n()(s,t),...i})}));d.displayName="CardFooter";const o=d;var p=s(96040);const h=r.forwardRef(((e,a)=>{let{bsPrefix:s,className:t,as:i="div",...d}=e;const o=(0,c.vE)(s,"card-header"),h=(0,r.useMemo)((()=>({cardHeaderBsPrefix:o})),[o]);return(0,l.jsx)(p.Z.Provider,{value:h,children:(0,l.jsx)(i,{ref:a,...d,className:n()(t,o)})})}));h.displayName="CardHeader";const m=h,f=r.forwardRef(((e,a)=>{let{bsPrefix:s,className:t,variant:r,as:i="img",...d}=e;const o=(0,c.vE)(s,"card-img");return(0,l.jsx)(i,{ref:a,className:n()(r?"".concat(o,"-").concat(r):o,t),...d})}));f.displayName="CardImg";const u=f,P=r.forwardRef(((e,a)=>{let{className:s,bsPrefix:t,as:r="div",...i}=e;return t=(0,c.vE)(t,"card-img-overlay"),(0,l.jsx)(r,{ref:a,className:n()(s,t),...i})}));P.displayName="CardImgOverlay";const y=P,_=r.forwardRef(((e,a)=>{let{className:s,bsPrefix:t,as:r="a",...i}=e;return t=(0,c.vE)(t,"card-link"),(0,l.jsx)(r,{ref:a,className:n()(s,t),...i})}));_.displayName="CardLink";const x=_;var A=s(27472);const E=(0,A.Z)("h6"),C=r.forwardRef(((e,a)=>{let{className:s,bsPrefix:t,as:r=E,...i}=e;return t=(0,c.vE)(t,"card-subtitle"),(0,l.jsx)(r,{ref:a,className:n()(s,t),...i})}));C.displayName="CardSubtitle";const N=C,v=r.forwardRef(((e,a)=>{let{className:s,bsPrefix:t,as:r="p",...i}=e;return t=(0,c.vE)(t,"card-text"),(0,l.jsx)(r,{ref:a,className:n()(s,t),...i})}));v.displayName="CardText";const j=v,T=(0,A.Z)("h5"),g=r.forwardRef(((e,a)=>{let{className:s,bsPrefix:t,as:r=T,...i}=e;return t=(0,c.vE)(t,"card-title"),(0,l.jsx)(r,{ref:a,className:n()(s,t),...i})}));g.displayName="CardTitle";const O=g,b=r.forwardRef(((e,a)=>{let{bsPrefix:s,className:t,bg:r,text:d,border:o,body:p=!1,children:h,as:m="div",...f}=e;const u=(0,c.vE)(s,"card");return(0,l.jsx)(m,{ref:a,...f,className:n()(t,u,r&&"bg-".concat(r),d&&"text-".concat(d),o&&"border-".concat(o)),children:p?(0,l.jsx)(i.Z,{children:h}):h})}));b.displayName="Card";const R=Object.assign(b,{Img:u,Title:O,Subtitle:N,Body:i.Z,Link:x,Text:j,Header:m,Footer:o,ImgOverlay:y})},99033:(e,a,s)=>{"use strict";s.d(a,{Z:()=>d});var t=s(72791),n=s(81694),r=s.n(n),c=s(10162),i=s(80184);const l=t.forwardRef(((e,a)=>{let{className:s,bsPrefix:t,as:n="div",...l}=e;return t=(0,c.vE)(t,"card-body"),(0,i.jsx)(n,{ref:a,className:r()(s,t),...l})}));l.displayName="CardBody";const d=l},96040:(e,a,s)=>{"use strict";s.d(a,{Z:()=>n});const t=s(72791).createContext(null);t.displayName="CardHeaderContext";const n=t},80473:(e,a,s)=>{"use strict";s.d(a,{Z:()=>p});var t=s(52007),n=s.n(t),r=s(72791),c=s(81694),i=s.n(c),l=s(80184);const d={"aria-label":n().string,onClick:n().func,variant:n().oneOf(["white"])},o=r.forwardRef(((e,a)=>{let{className:s,variant:t,"aria-label":n="Close",...r}=e;return(0,l.jsx)("button",{ref:a,type:"button",className:i()("btn-close",t&&"btn-close-".concat(t),s),"aria-label":n,...r})}));o.displayName="CloseButton",o.propTypes=d;const p=o},47022:(e,a,s)=>{"use strict";s.d(a,{Z:()=>d});var t=s(81694),n=s.n(t),r=s(72791),c=s(10162),i=s(80184);const l=r.forwardRef(((e,a)=>{let{bsPrefix:s,fluid:t=!1,as:r="div",className:l,...d}=e;const o=(0,c.vE)(s,"container"),p="string"===typeof t?"-".concat(t):"-fluid";return(0,i.jsx)(r,{ref:a,...d,className:n()(l,t?"".concat(o).concat(p):o)})}));l.displayName="Container";const d=l},62591:(e,a,s)=>{"use strict";s.d(a,{Z:()=>l});var t=s(81694),n=s.n(t),r=s(72791),c=s(10162),i=s(80184);const l=r.forwardRef(((e,a)=>{let{bsPrefix:s,className:t,striped:r,bordered:l,borderless:d,hover:o,size:p,variant:h,responsive:m,...f}=e;const u=(0,c.vE)(s,"table"),P=n()(t,u,h&&"".concat(u,"-").concat(h),p&&"".concat(u,"-").concat(p),r&&"".concat(u,"-").concat("string"===typeof r?"striped-".concat(r):"striped"),l&&"".concat(u,"-bordered"),d&&"".concat(u,"-borderless"),o&&"".concat(u,"-hover")),y=(0,i.jsx)("table",{...f,className:P,ref:a});if(m){let e="".concat(u,"-responsive");return"string"===typeof m&&(e="".concat(e,"-").concat(m)),(0,i.jsx)("div",{className:e,children:y})}return y}))},27472:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var t=s(72791),n=s(81694),r=s.n(n),c=s(80184);const i=e=>t.forwardRef(((a,s)=>(0,c.jsx)("div",{...a,ref:s,className:r()(a.className,e)})))},77632:()=>{},42480:()=>{}}]);
//# sourceMappingURL=5769.7b509d5e.chunk.js.map