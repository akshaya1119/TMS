(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6587,2347],{24220:(e,a,t)=>{"use strict";t.d(a,{R:()=>i});var s=t(72791),n=t(89704),c=t.n(n);const r={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_ARCHIEVED:"http://api1.chandrakala.co.in/api/Tickets/Archived",REACT_APP_API_CHANGE_PASSWORD:"http://api1.chandrakala.co.in/api/Login/ChangePassword",REACT_APP_API_DEPARTMENTS:"http://api1.chandrakala.co.in/api/Departments",REACT_APP_API_FORGOT_PASSWORD:"http://api1.chandrakala.co.in/api/Login/ForgetPassword",REACT_APP_API_LOGIN:"http://api1.chandrakala.co.in/api/Login",REACT_APP_API_MODULE:"http://api1.chandrakala.co.in/api/Module",REACT_APP_API_PERMISSION:"http://api1.chandrakala.co.in/api/Permission",REACT_APP_API_PROJECTTYPE:"http://api1.chandrakala.co.in/api/ProjectType",REACT_APP_API_ROLES:"http://api1.chandrakala.co.in/api/Roles",REACT_APP_API_TICKET:"http://api1.chandrakala.co.in/api/Tickets",REACT_APP_API_TICKETFLOW:"http://api1.chandrakala.co.in/api/TicketFlow",REACT_APP_API_TICKETFLOW_BY_COMMENTS:"http://api1.chandrakala.co.in/api/TicketFlow/CommentsByTicketId",REACT_APP_API_TICKETTYPE:"http://api1.chandrakala.co.in/api/TicketTypes",REACT_APP_API_TICKET_COMPLETED:"http://api1.chandrakala.co.in/api/Ticket/MarkCompleted",REACT_APP_API_UPLOAD:"http://api1.chandrakala.co.in/api/Users/upload",REACT_APP_API_USERS:"http://api1.chandrakala.co.in/api/Users",REACT_APP_API_USER_BY_ID:"http://api1.chandrakala.co.in/api/Users",REACT_APP_BASE_API_URL:"http://api1.chandrakala.co.in/api",REACT_APP_BASE_URL:"http://api1.chandrakala.co.in",REACT_APP_MY_SERVER:"http://ticket.chandrakala.co.in"}.REACT_APP_SECRET_KEY||"ghjsfysdg123",l=(0,s.createContext)({encrypt:e=>{console.log("Data to encrypt:",e);const a=c().AES.encrypt(e.toString(),r).toString();return console.log("Encrypted data:",a),a.replace(/\//g,";")},decrypt:e=>{if("string"!==typeof e)return e;e=e.replace(/;/g,"/");return c().AES.decrypt(e,r).toString(c().enc.Utf8)}}),i=()=>(0,s.useContext)(l)},5539:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d});var s=t(55294),n=t(72791),c=t(24849),r=t(57689),l=t(24220),i=t(80184);const d=()=>{const{encrypt:e}=(0,l.R)(),[a,t]=(0,n.useState)(!1),[d,o]=(0,n.useState)([]),[m,h]=(0,n.useState)([]),[p,x]=(0,n.useState)({firstName:"",lastName:"",email:"",password:"",autoGenPass:!0,mobileNo:"",departmentName:"",role:"",address:"",dateOfBirth:"",profilePicturePath:null}),[u,_]=(0,n.useState)(null);(0,n.useEffect)((()=>{!async function(){try{const e=await s.Z.get("http://api1.chandrakala.co.in/api/Departments");o(e.data)}catch(e){console.error("Error fetching departments:",e)}}()}),[]),(0,n.useEffect)((()=>{!async function(){try{const e=await s.Z.get("http://api1.chandrakala.co.in/api/Roles");h(e.data)}catch(e){console.error("Error fetching Roles:",e)}}()}),[]);const P=(0,r.s0)(),N=e=>{const{name:a,value:t,type:s}=e.target;x((n=>({...n,[a]:"file"===s?e.target.files:t})))};return(0,i.jsxs)("div",{className:" au container mt-2",children:[(0,i.jsx)("div",{className:"text-start mb-12 d-flex justify-content-between"}),u&&(0,i.jsx)("div",{className:"alert ".concat(u.includes("successfully")?"alert-success":"alert-danger"),role:"alert",children:u}),(0,i.jsxs)("form",{onSubmit:function(a){a.preventDefault(),t(!0),console.log(p);const n=(new Date).toISOString().split("T")[0];p.dateOfBirth>n?_("Date of Birth must be smaller than the current date."):s.Z.post("http://api1.chandrakala.co.in/api/Users",p).then((a=>{console.log(a),_("User added successfully!"),t(!1),x({firstName:"",lastName:"",email:"",password:"",autoGenPass:!0,mobileNo:"",departmentName:"",role:"",address:"",dateOfBirth:"",profilePicturePath:null}),P("/Users/AddPermissions/".concat(e(a.data.userId)))})).catch((e=>{console.log(e),e.response&&409===e.response.status?_("Error: Email already in use. Please choose a different email."):_("Error adding User. Please try again."),t(!1)}))},children:[(0,i.jsxs)("div",{className:"row mb-3",children:[(0,i.jsxs)("label",{htmlFor:"firstName",className:"col-sm-1 col-form-label text-start",children:["FirstName",(0,i.jsx)("span",{className:"text-danger",children:"  * "})]}),(0,i.jsx)("div",{className:"col-sm-3",children:(0,i.jsx)("input",{type:"text",className:"form-control",id:"firstName",name:"firstName",placeholder:"Enter FirstName",required:!0,onChange:N})}),(0,i.jsxs)("label",{htmlFor:"lastName",className:"col-sm-1 col-form-label text-end",children:["LastName",(0,i.jsx)("span",{className:"text-danger",children:"  * "})]}),(0,i.jsx)("div",{className:"col-sm-3",children:(0,i.jsx)("input",{type:"text",className:"form-control",id:"lastName",name:"lastName",placeholder:"Enter lastName",required:!0,onChange:N})}),(0,i.jsxs)("label",{htmlFor:"mobileNo",className:"col-sm-1 col-form-label text-start",children:["MobileNo",(0,i.jsx)("span",{className:"text-danger",children:"  * "})]}),(0,i.jsx)("div",{className:"col-sm-3",children:(0,i.jsx)("input",{type:"text",className:"form-control",id:"mobileNo",name:"mobileNo",placeholder:"Enter Mobile No.",required:!0,onChange:N})})]}),(0,i.jsxs)("div",{className:"row mb-3",children:[(0,i.jsxs)("label",{htmlFor:"address",className:"col-sm-1 col-form-label text-end",children:["Address",(0,i.jsx)("span",{className:"text-danger",children:"  * "})]}),(0,i.jsx)("div",{className:"col-sm-3",children:(0,i.jsx)("input",{type:"address",className:"form-control",id:"address",name:"address",placeholder:"Enter Address",required:!0,onChange:N})}),(0,i.jsxs)("label",{htmlFor:"dateOfBirth",className:"col-sm-1 col-form-label text-end",children:["DOB",(0,i.jsx)("span",{className:"text-danger",children:"  * "})]}),(0,i.jsx)("div",{className:"col-sm-3",children:(0,i.jsx)("input",{type:"date",className:"form-control",id:"dateOfBirth",name:"dateOfBirth",placeholder:"Enter Date Of Birth",required:!0,onChange:N})}),(0,i.jsxs)("label",{htmlFor:"email",className:"col-sm-1 col-form-label text-end",children:["Email",(0,i.jsx)("span",{className:"text-danger",children:"  * "})]}),(0,i.jsx)("div",{className:"col-sm-3",children:(0,i.jsx)("input",{type:"text",className:"form-control",id:"email",name:"email",placeholder:"Enter email",required:!0,onChange:N})})]}),(0,i.jsxs)("div",{className:"row mb-3",children:[(0,i.jsxs)("label",{htmlFor:"departmentName",className:"col-sm-1 col-form-label text-start",children:["Department",(0,i.jsx)("span",{className:"text-danger",children:"  * "})]}),(0,i.jsx)("div",{className:"col-sm-3",children:(0,i.jsxs)("select",{className:"form-select",id:"departmentName",name:"departmentName",required:!0,onChange:N,children:[(0,i.jsx)("option",{value:"",children:"Select department"}),d.map((e=>(0,i.jsx)("option",{value:e.departmentName,children:e.departmentName},e.id)))]})}),(0,i.jsxs)("label",{htmlFor:"roleName",className:"col-sm-1 col-form-label text-start",children:["Designation",(0,i.jsx)("span",{className:"text-danger",children:"  * "})]}),(0,i.jsx)("div",{className:"col-sm-3",children:(0,i.jsxs)("select",{className:"form-select",id:"roleName",name:"roleName",required:!0,onChange:N,children:[(0,i.jsx)("option",{value:"",children:"Select Role"}),m.map((e=>(0,i.jsx)("option",{value:e.role,children:e.role},e.roleId)))]})})]}),(0,i.jsxs)("div",{className:"row mb-3",children:[(0,i.jsx)("div",{className:"col-sm-3"}),(0,i.jsx)("div",{className:"col-sm-9 text-end",children:(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.Z,{animation:"border",size:"sm"}),"Adding User..."]}):" Add User"})})]})]})]})}},29565:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var s=t(72791),n=t(47022),c=t(89743),r=t(2677),l=t(26514),i=t(95313),d=t(62591),o=t(43360),m=(t(77632),t(55294)),h=t(57689),p=(t(5539),t(4751)),x=t(80184);const u=()=>{const{userID:e}=(0,h.UO)(),a=parseInt(e,10),[t,u]=(0,s.useState)([]),[_,P]=(0,s.useState)([]),[N,j]=(0,s.useState)({}),A=(0,h.s0)(),[E,f]=(0,s.useState)(""),[g,C]=(0,s.useState)(""),[T,k]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(async()=>{try{const a=await m.Z.get("".concat("http://api1.chandrakala.co.in/api/Users","/").concat(e));j(a.data)}catch(a){console.error("Error fetching user details:",a)}})()}),[e]),(0,s.useEffect)((()=>{(async()=>{try{const e=await m.Z.get("http://api1.chandrakala.co.in/api/Module");P(e.data)}catch(e){console.error("Error fetching modules:",e)}})()}),[]);const y=(e,a,s)=>{const n=[...t],c=n.findIndex((a=>a.name===e));if(-1!==c){const e=n[c];e[a]=s,n[c]=e}else n.push({name:e,candelete:!1,canview:!1,canadd:!1,canupdate:!1,[a]:s});u(n)};return(0,x.jsxs)(n.Z,{children:[E&&!T&&(0,x.jsx)(p.bZ,{variant:"success",className:"mt-3",children:E}),g&&!T&&(0,x.jsx)(p.bZ,{variant:"danger",className:"mt-3",children:g}),(0,x.jsx)(c.Z,{className:"justify-content-center mt-5",children:(0,x.jsx)(r.Z,{md:8,children:(0,x.jsxs)(l.Z,{children:[(0,x.jsxs)(l.Z.Header,{as:"h5",className:"text-center",children:["Module Permissions of ",N.firstName]}),(0,x.jsx)(l.Z.Body,{children:(0,x.jsx)(i.Z,{children:(0,x.jsxs)(d.Z,{bordered:!0,children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"Module Name"}),(0,x.jsx)("th",{children:"Can View"}),(0,x.jsx)("th",{children:"Can Add"}),(0,x.jsx)("th",{children:"Can Update"}),(0,x.jsx)("th",{children:"Can Delete"})]})}),(0,x.jsx)("tbody",{children:_.map((e=>(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:e.name}),(0,x.jsx)("td",{children:(0,x.jsx)(i.Z.Check,{type:"switch",id:"".concat(e.name,"-canview-switch"),label:"",onChange:a=>y(e.name,"canview",a.target.checked),checked:t.some((a=>a.name===e.name&&a.canview))})}),(0,x.jsx)("td",{children:(0,x.jsx)(i.Z.Check,{type:"switch",id:"".concat(e.name,"-canadd-switch"),label:"",onChange:a=>y(e.name,"canadd",a.target.checked),checked:t.some((a=>a.name===e.name&&a.canadd))})}),(0,x.jsx)("td",{children:(0,x.jsx)(i.Z.Check,{type:"switch",id:"".concat(e.name,"-canupdate-switch"),label:"",onChange:a=>y(e.name,"canupdate",a.target.checked),checked:t.some((a=>a.name===e.name&&a.canupdate))})}),(0,x.jsx)("td",{children:(0,x.jsx)(i.Z.Check,{type:"switch",id:"".concat(e.name,"-candelete-switch"),label:"",onChange:a=>y(e.name,"candelete",a.target.checked),checked:t.some((a=>a.name===e.name&&a.candelete))})})]},e.id)))})]})})}),(0,x.jsx)(l.Z.Footer,{className:"text-center",children:(0,x.jsx)(o.Z,{variant:"primary",onClick:()=>{k(!0),C("");const s=t.map((e=>{var t;let{name:s,canview:n,canadd:c,canupdate:r,candelete:l}=e;return{userID:a,id:null===(t=_.find((e=>e.name===s)))||void 0===t?void 0:t.id,canAddOnly:c,canDeleteOnly:l,canUpdateOnly:r,canViewOnly:n}}));m.Z.post("http://api1.chandrakala.co.in/api/Permission",s).then((a=>{console.log("Permissions added successfully:",a.data),f("Permissions added successfully"),A("/permissions/".concat(e))})).catch((e=>{console.error("Error adding permissions:",e),C("Error Adding Permissions. Try again later.")})).finally((()=>{k(!1)}))},children:"Add Permission"})})]})})})]})}},42480:()=>{}}]);
//# sourceMappingURL=6587.7b4f2182.chunk.js.map