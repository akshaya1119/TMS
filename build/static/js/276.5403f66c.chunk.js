(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[276],{24220:(a,e,t)=>{"use strict";t.d(e,{R:()=>d});var s=t(72791),n=t(89704),r=t.n(n);const c={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_ARCHIEVED:"http://api1.chandrakala.co.in/api/Tickets/ArchivedByUser",REACT_APP_API_CHANGE_PASSWORD:"http://api1.chandrakala.co.in/api/Login/ChangePassword",REACT_APP_API_DEPARTMENTS:"http://api1.chandrakala.co.in/api/Departments",REACT_APP_API_DESIGNATION:"http://api1.chandrakala.co.in/api/Designation",REACT_APP_API_FORGOT_PASSWORD:"http://api1.chandrakala.co.in/api/Login/ForgetPassword",REACT_APP_API_LOGIN:"http://api1.chandrakala.co.in/api/Login",REACT_APP_API_MODULE:"http://api1.chandrakala.co.in/api/Modules",REACT_APP_API_PERMISSION:"http://api1.chandrakala.co.in/api/Permission",REACT_APP_API_PROJECTTYPE:"http://api1.chandrakala.co.in/api/ProjectType",REACT_APP_API_TICKET:"http://api1.chandrakala.co.in/api/Tickets",REACT_APP_API_TICKETFLOW:"http://api1.chandrakala.co.in/api/TicketFlow",REACT_APP_API_TICKETFLOW_BY_COMMENTS:"http://api1.chandrakala.co.in/api/TicketFlow/CommentsByTicketId",REACT_APP_API_TICKETTYPE:"http://api1.chandrakala.co.in/api/TicketTypes",REACT_APP_API_TICKET_COMPLETED:"http://api1.chandrakala.co.in/api/Tickets/MarkCompleted",REACT_APP_API_UPLOAD:"http://api1.chandrakala.co.in/api/Users/upload",REACT_APP_API_USERS:"http://api1.chandrakala.co.in/api/Users",REACT_APP_API_USER_BY_ID:"http://api1.chandrakala.co.in/api/Users",REACT_APP_BASE_API_URL:"http://api1.chandrakala.co.in/api",REACT_APP_BASE_URL:"http://api1.chandrakala.co.in",REACT_APP_MY_SERVER:"http://test1.chandrakala.co.in"}.REACT_APP_SECRET_KEY||"ghjsfysdg123",i=(0,s.createContext)({encrypt:a=>{console.log("Data to encrypt:",a);const e=r().AES.encrypt(a.toString(),c).toString();return console.log("Encrypted data:",e),e.replace(/\//g,";")},decrypt:a=>{if("string"!==typeof a)return a;a=a.replace(/;/g,"/");return r().AES.decrypt(a,c).toString(r().enc.Utf8)}}),d=()=>(0,s.useContext)(i)},42922:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>f});var s=t(72791),n=t(47022),r=t(30018),c=t(89743),i=t(2677),d=t(54694),l=t(29795),o=t(62591),p=(t(77632),t(55294)),h=t(24220),m=t(36704),P=t(80184);const _="http://api1.chandrakala.co.in",f=a=>{let{userid:e}=a;const t=e,{decrypt:f}=(0,h.R)(),[y,A]=(0,s.useState)([]),[u,E]=(0,s.useState)([]),[x,C]=(0,s.useState)(!1),[N,v]=(0,s.useState)(""),[T,O]=(0,s.useState)(""),[R,g]=(0,s.useState)(null);(0,s.useEffect)((()=>{(async()=>{try{const a=await p.Z.get("".concat(_,"/api/Permission/ByUser/").concat(t));A(a.data)}catch(a){console.error("Error fetching permissions:",a),O("Error fetching permissions. Please try again.")}})(),(async()=>{try{const a=await p.Z.get("".concat(_,"/api/Modules"));E(a.data)}catch(a){console.error("Error fetching modules:",a),O("Error fetching modules. Please try again.")}})()}),[t]);const j=async(a,e,t)=>{C(!0),O("");try{const s=y.map((s=>s.permission_Id===a?"canViewOnly"!==e||t?{...s,[e]:t,..."canViewOnly"===e&&t?{canAddOnly:!1,canUpdateOnly:!1,canDeleteOnly:!1}:"canAddOnly"===e&&t?{canViewOnly:!0}:"canUpdateOnly"===e&&t?{canViewOnly:!0,canAddOnly:!0}:"canDeleteOnly"===e&&t?{canViewOnly:!0,canAddOnly:!0,canUpdateOnly:!0}:{}}:{...s,canViewOnly:!1,canAddOnly:!1,canUpdateOnly:!1,canDeleteOnly:!1}:s));A(s),g(a);const n=s.find((e=>e.permission_Id===a));if(console.log("Updated Permission:",n),!n)return void O("Updated permission not found. Please try again.");const{permission_Id:r,userID:c,id:i,canAddOnly:d,canDeleteOnly:l,canUpdateOnly:o,canViewOnly:h}=n;await p.Z.put("".concat(_,"/api/Permission/").concat(r),{permission_Id:r,userID:c,id:i,canAddOnly:d,canDeleteOnly:l,canUpdateOnly:o,canViewOnly:h}),v("Permissions updated successfully")}catch(s){console.error("Error updating permissions:",s),O("Error updating permissions. Please try again.")}finally{C(!1)}},k=a=>{const e=u.find((e=>e.id===a));return e?e.name:"Unknown"};return(0,P.jsx)(m.Z,{children:a=>{let{hasPermission:e}=a;return e(7,"canUpdateOnly")&&(0,P.jsxs)(n.Z,{children:[N&&!x&&(0,P.jsx)(r.Z,{variant:"success",className:"mt-3",children:N}),T&&!x&&(0,P.jsx)(r.Z,{variant:"danger",className:"mt-3",children:T}),(0,P.jsx)(c.Z,{className:"justify-content-center",children:(0,P.jsx)(i.Z,{md:12,children:(0,P.jsxs)(d.Z,{children:[(0,P.jsx)(d.Z.Header,{as:"h5",className:"text-center",children:"Update Permissions"}),(0,P.jsx)(d.Z.Body,{children:(0,P.jsx)(l.Z,{className:"table-responsive",children:(0,P.jsxs)(o.Z,{bordered:!0,children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{children:[(0,P.jsx)("th",{children:"Module Name"}),(0,P.jsx)("th",{children:"Can View"}),(0,P.jsx)("th",{children:"Can Add"}),(0,P.jsx)("th",{children:"Can Update"}),(0,P.jsx)("th",{children:"Can Delete"})]})}),(0,P.jsx)("tbody",{children:y.length>0&&y.map((a=>(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:k(a.id)}),(0,P.jsx)("td",{children:(0,P.jsx)(l.Z.Check,{type:"switch",id:"".concat(k(a.id),"-canview-switch"),label:"",checked:a.canViewOnly,onChange:e=>j(a.permission_Id,"canViewOnly",e.target.checked)})}),(0,P.jsx)("td",{children:(0,P.jsx)(l.Z.Check,{type:"switch",id:"".concat(k(a.id),"-canadd-switch"),label:"",checked:a.canAddOnly,onChange:e=>j(a.permission_Id,"canAddOnly",e.target.checked)})}),(0,P.jsx)("td",{children:(0,P.jsx)(l.Z.Check,{type:"switch",id:"".concat(k(a.id),"-canupdate-switch"),label:"",checked:a.canUpdateOnly,onChange:e=>j(a.permission_Id,"canUpdateOnly",e.target.checked)})}),(0,P.jsx)("td",{children:(0,P.jsx)(l.Z.Check,{type:"switch",id:"".concat(k(a.id),"-candelete-switch"),label:"",checked:a.canDeleteOnly,onChange:e=>j(a.permission_Id,"canDeleteOnly",e.target.checked)})})]},a.permission_Id)))})]})})})]})})})]})}})}},30018:(a,e,t)=>{"use strict";t.d(e,{Z:()=>E});var s=t(81694),n=t.n(s),r=t(72791),c=t(80239),i=t(39007),d=t(10162),l=t(27472),o=t(80184);const p=(0,l.Z)("h4");p.displayName="DivStyledAsH4";const h=r.forwardRef(((a,e)=>{let{className:t,bsPrefix:s,as:r=p,...c}=a;return s=(0,d.vE)(s,"alert-heading"),(0,o.jsx)(r,{ref:e,className:n()(t,s),...c})}));h.displayName="AlertHeading";const m=h;var P=t(31396);const _=r.forwardRef(((a,e)=>{let{className:t,bsPrefix:s,as:r=P.Z,...c}=a;return s=(0,d.vE)(s,"alert-link"),(0,o.jsx)(r,{ref:e,className:n()(t,s),...c})}));_.displayName="AlertLink";const f=_;var y=t(72709),A=t(80473);const u=r.forwardRef(((a,e)=>{const{bsPrefix:t,show:s=!0,closeLabel:r="Close alert",closeVariant:l,className:p,children:h,variant:m="primary",onClose:P,dismissible:_,transition:f=y.Z,...u}=(0,c.Ch)(a,{show:"onClose"}),E=(0,d.vE)(t,"alert"),x=(0,i.Z)((a=>{P&&P(!1,a)})),C=!0===f?y.Z:f,N=(0,o.jsxs)("div",{role:"alert",...C?void 0:u,ref:e,className:n()(p,E,m&&"".concat(E,"-").concat(m),_&&"".concat(E,"-dismissible")),children:[_&&(0,o.jsx)(A.Z,{onClick:x,"aria-label":r,variant:l}),h]});return C?(0,o.jsx)(C,{unmountOnExit:!0,...u,ref:void 0,in:s,children:N}):s?N:null}));u.displayName="Alert";const E=Object.assign(u,{Link:f,Heading:m})},54694:(a,e,t)=>{"use strict";t.d(e,{Z:()=>k});var s=t(81694),n=t.n(s),r=t(72791),c=t(10162),i=t(99033),d=t(80184);const l=r.forwardRef(((a,e)=>{let{className:t,bsPrefix:s,as:r="div",...i}=a;return s=(0,c.vE)(s,"card-footer"),(0,d.jsx)(r,{ref:e,className:n()(t,s),...i})}));l.displayName="CardFooter";const o=l;var p=t(96040);const h=r.forwardRef(((a,e)=>{let{bsPrefix:t,className:s,as:i="div",...l}=a;const o=(0,c.vE)(t,"card-header"),h=(0,r.useMemo)((()=>({cardHeaderBsPrefix:o})),[o]);return(0,d.jsx)(p.Z.Provider,{value:h,children:(0,d.jsx)(i,{ref:e,...l,className:n()(s,o)})})}));h.displayName="CardHeader";const m=h,P=r.forwardRef(((a,e)=>{let{bsPrefix:t,className:s,variant:r,as:i="img",...l}=a;const o=(0,c.vE)(t,"card-img");return(0,d.jsx)(i,{ref:e,className:n()(r?"".concat(o,"-").concat(r):o,s),...l})}));P.displayName="CardImg";const _=P,f=r.forwardRef(((a,e)=>{let{className:t,bsPrefix:s,as:r="div",...i}=a;return s=(0,c.vE)(s,"card-img-overlay"),(0,d.jsx)(r,{ref:e,className:n()(t,s),...i})}));f.displayName="CardImgOverlay";const y=f,A=r.forwardRef(((a,e)=>{let{className:t,bsPrefix:s,as:r="a",...i}=a;return s=(0,c.vE)(s,"card-link"),(0,d.jsx)(r,{ref:e,className:n()(t,s),...i})}));A.displayName="CardLink";const u=A;var E=t(27472);const x=(0,E.Z)("h6"),C=r.forwardRef(((a,e)=>{let{className:t,bsPrefix:s,as:r=x,...i}=a;return s=(0,c.vE)(s,"card-subtitle"),(0,d.jsx)(r,{ref:e,className:n()(t,s),...i})}));C.displayName="CardSubtitle";const N=C,v=r.forwardRef(((a,e)=>{let{className:t,bsPrefix:s,as:r="p",...i}=a;return s=(0,c.vE)(s,"card-text"),(0,d.jsx)(r,{ref:e,className:n()(t,s),...i})}));v.displayName="CardText";const T=v,O=(0,E.Z)("h5"),R=r.forwardRef(((a,e)=>{let{className:t,bsPrefix:s,as:r=O,...i}=a;return s=(0,c.vE)(s,"card-title"),(0,d.jsx)(r,{ref:e,className:n()(t,s),...i})}));R.displayName="CardTitle";const g=R,j=r.forwardRef(((a,e)=>{let{bsPrefix:t,className:s,bg:r,text:l,border:o,body:p=!1,children:h,as:m="div",...P}=a;const _=(0,c.vE)(t,"card");return(0,d.jsx)(m,{ref:e,...P,className:n()(s,_,r&&"bg-".concat(r),l&&"text-".concat(l),o&&"border-".concat(o)),children:p?(0,d.jsx)(i.Z,{children:h}):h})}));j.displayName="Card";const k=Object.assign(j,{Img:_,Title:g,Subtitle:N,Body:i.Z,Link:u,Text:T,Header:m,Footer:o,ImgOverlay:y})},99033:(a,e,t)=>{"use strict";t.d(e,{Z:()=>l});var s=t(72791),n=t(81694),r=t.n(n),c=t(10162),i=t(80184);const d=s.forwardRef(((a,e)=>{let{className:t,bsPrefix:s,as:n="div",...d}=a;return s=(0,c.vE)(s,"card-body"),(0,i.jsx)(n,{ref:e,className:r()(t,s),...d})}));d.displayName="CardBody";const l=d},96040:(a,e,t)=>{"use strict";t.d(e,{Z:()=>n});const s=t(72791).createContext(null);s.displayName="CardHeaderContext";const n=s},80473:(a,e,t)=>{"use strict";t.d(e,{Z:()=>p});var s=t(52007),n=t.n(s),r=t(72791),c=t(81694),i=t.n(c),d=t(80184);const l={"aria-label":n().string,onClick:n().func,variant:n().oneOf(["white"])},o=r.forwardRef(((a,e)=>{let{className:t,variant:s,"aria-label":n="Close",...r}=a;return(0,d.jsx)("button",{ref:e,type:"button",className:i()("btn-close",s&&"btn-close-".concat(s),t),"aria-label":n,...r})}));o.displayName="CloseButton",o.propTypes=l;const p=o},47022:(a,e,t)=>{"use strict";t.d(e,{Z:()=>l});var s=t(81694),n=t.n(s),r=t(72791),c=t(10162),i=t(80184);const d=r.forwardRef(((a,e)=>{let{bsPrefix:t,fluid:s=!1,as:r="div",className:d,...l}=a;const o=(0,c.vE)(t,"container"),p="string"===typeof s?"-".concat(s):"-fluid";return(0,i.jsx)(r,{ref:e,...l,className:n()(d,s?"".concat(o).concat(p):o)})}));d.displayName="Container";const l=d},62591:(a,e,t)=>{"use strict";t.d(e,{Z:()=>d});var s=t(81694),n=t.n(s),r=t(72791),c=t(10162),i=t(80184);const d=r.forwardRef(((a,e)=>{let{bsPrefix:t,className:s,striped:r,bordered:d,borderless:l,hover:o,size:p,variant:h,responsive:m,...P}=a;const _=(0,c.vE)(t,"table"),f=n()(s,_,h&&"".concat(_,"-").concat(h),p&&"".concat(_,"-").concat(p),r&&"".concat(_,"-").concat("string"===typeof r?"striped-".concat(r):"striped"),d&&"".concat(_,"-bordered"),l&&"".concat(_,"-borderless"),o&&"".concat(_,"-hover")),y=(0,i.jsx)("table",{...P,className:f,ref:e});if(m){let a="".concat(_,"-responsive");return"string"===typeof m&&(a="".concat(a,"-").concat(m)),(0,i.jsx)("div",{className:a,children:y})}return y}))},27472:(a,e,t)=>{"use strict";t.d(e,{Z:()=>i});var s=t(72791),n=t(81694),r=t.n(n),c=t(80184);const i=a=>s.forwardRef(((e,t)=>(0,c.jsx)("div",{...e,ref:t,className:r()(e.className,a)})))},77632:()=>{},42480:()=>{}}]);
//# sourceMappingURL=276.5403f66c.chunk.js.map